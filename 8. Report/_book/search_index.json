[["index.html", "Analysing Australian Electoral Results Dedication", " Analysing Australian Electoral Results Carlos Yanez Santibanez 26 June 2023 Dedication To Lauren. Thanks for you constant, never-ending support, encouragement and patience. To you and Lucas, with whom I have made Australia home. "],["abstract.html", "Abstract", " Abstract In politics, it is important for political actors to understand populations are inclined to specific political parties. This is a topic of interest to political movements, the media and political science. According to the latter, factors like age, wealth and education can be used as predictors of vote. However, these axioms have been challenged as changes in the political system (like the rise of populism and new political movements) seem to defy conventional knowledge of the political leanings of the electorates. This project presents an analysis of how voting patterns in Australia are impacted by demographic factors. In particular, it examines how changes in demographic attributes 1 influence primary voting 2 for federal elections for the Commonwealth’s House of Representatives. To achieve this objective, Census results were reviewed, and key demographic statistics were selected based on a review of the existing literature ([1], [2], [3]) and media narrative ([4], [5], [6], [7]). Code in the form of R packages was written to extract census data and election results systematically and repeatedly. Once data was selected, commonalities across electoral divisions were identified, which were used to classify them into three distinct segments: 1. mostly inner-city areas in large metropolitan areas, 2. the suburban areas in middle, and 3. outer suburbs, and regional and rural constituencies. Then, multivariate elastic net regression models (for each cluster) were fitted to identify which demographic factors influence primary voting for the three largest political groups with national presence (namely the Australian Labor Party, the Coalition and the Australian Greens). From this composite model, it was possible to establish a link between age, income, religious beliefs, cultural diversity, and primary voting paterrns across all electorates. In particular, it was possible to establish voting in inner-city electorates may be driven by age (younger people voting left, older voting right), income (higher income population favouring both the Greens and the Coalition) and religiosity (non-religious people leaning Green, different religious groups preferring either Labor or the Coalition). Those factors were also found to be relevant in the suburban fringes, where also different culturally diverse communities seem to prefer either Labor or the Coalition. However, in regional areas the same factors seem less relevant, and education levels and higher-income are positively associated with Labor vote. After fitting this model, a naive retrospective forecast of the 2022 election was attempted. Although the model only has a discrete predicting power (as expected), it proves to be a useful analysis tool to understand the drivers behind changes in voting patterns. Some particular examples are presented, including the results of the so-called “Teal Wave”. In those cases it is possible to observe that the Coalition vote was in-line with demographic expectations, concluding that teal MPs weren’t elected backed by dissatisfied Coalition voters. Another case presented examines the continuous growth of the Green vote in selected inner-city electorates, driven by generational change and gentrification. Finally, a more diverse set of electorates were also analysed, looking for cases where the selected variables did not necessarily correctly interpret the results. This was deemed useful to understand potential limitations. To conclude, a series of improvements were suggested to improve predictive and analytical power. From Census data,↩︎ First choices in a preferential voting system.↩︎ "],["intro.html", "1 Introduction 1.1 A brief introduction to Australia’s political system 1.2 Australian Political landscape 1.3 Problem statement and research questions", " 1 Introduction The start of the 21st century has come with significant disruption across the world. Although it may sound cliché, the end of the post-war order has come with many challenges: climate change, global recessions, and a the first global pandemic in hundred years. Additionally, improved quality of life has brought both longer life expectancy and decreased birth rates across the world. All these changes have shaken the political systems and conventions of the 20th century. Uncertainty about the future has proven fertile ground for populist movements. Longer lifespans mean that the post-war generation (Baby Boomers) are still active in political life as many of them enter their 8th decade, worrying about keeping the lifestyle as they age. On the other hand “young” Millenials are reaching their forties with uncertain prospects due to the growing of effects climate change, and their perceived inability to reach the same level of wealth as their parents. In Australia, the last decade of political life has been marked by these issues, which have been contentious points both across the political divide, and within the major parties that have dominated in politics for much of the past century. Political narratives (from the media and politicians) tend to characterise this issues in terms of conflict between different population groups (stoic Baby Boomers vs. Millenials, inner-city “lefties” vs. “real Australia”, southern vs. northern states). As many of these perceived issues can be described in demographic terms, it is of interest to analyse how demographic factors may or may not affect political choices. 1.1 A brief introduction to Australia’s political system The Commonwealth of Australia is a federal, constitutional monarchy. At a federal level, the political system consists of multi-party parliamentary democracy, largely based on the Westminster model. Like the UK national Parliament, the lower chamber (House of Representatives) is composed of elected members, each being the sole representative of one geographical area (a Commonwealth Electoral Division or CED, also referred to as an electorate or a division). The number of and geographical extent of each electorate is determined by the Australian Electoral Commission - an independent body - following constitutional provisions. Although redistributions are regularly conducted to aim for equal representation, in practice electorate rolls range between 72,345 and 138,836 voters per division, due to great differences in population densities across the country, and to ensure minimum representation for each state/territory, as enshrined in the Constitution. Similarly to other Westminster systems, the leader of the party or Coalition with the largest number of elected representatives (Members of Parliament or MPs) gets invited by the Governor General (as representative of the Australian monarch) to form the executive branch of government (the Government). The second majority is formally designed “The Opposition”, while all remaining MPs are known as “the crossbench”. In terms of the electoral system, voting is compulsory for all Australian citizens living in the country. Registration is automatic upon turning 18 years old or becoming a citizen, based on their place of residence. Both failing to update enrolment details and failing to vote attract fines - which are enforced. Participation rates usually range above 90%. MPs are elected using a preferential voting system, in which voters must rank candidates in the ballot - with 1 being the preferred candidate, 2 their second choice and so on. When tallying up the results, the below process is followed: Votes are tallied based on first preferences - which are known as the primary vote. Candidates are sorted by their respective number of votes. If a candidate obtains an absolute majority (i.e. one vote above half of the valid ballots), they are declared the winner. If no candidate reaches absolute majority, the ballots from the candidate with the lowest number of votes are taken aside and redistributed to the other candidate based on the second preference. Votes are tallied again, and the process is repeated (based on each ballot’s highest preference still in the race) until a candidate obtains over 50% of the votes. A graphical example of preference flows for the Division of Cooper is presented in figure 1.1. Figure 1.1: Preference flow for Cooper 2022 1.2 Australian Political landscape Although a multi-party system in theory, Australian politics have operated as a de facto two-party system through most of the Federation’s history - traditionally a labour-aligned party and its opposing counterpart. Nowadays the landscape is composed of two major forces (“parties of government”) and a number of smaller groups, namely: The Australian Labor Party (ALP) (https://www.alp.org.au) is the oldest party in the system. As its name suggests, the party’s origin is in the labour movement from the late Victorian era. This is a left-of-centre party and it is made up of two official factions: the centrist “Right Faction” (historically associated with some migrant communities and Catholic Social Teachings) and a “Left Faction” (with socialist roots). The party membership is comprised both of individuals and unions. The Coalition (COAL) is a grouping of two federal right-of-centre parties (fused in two states). The largest and leading party is the Liberal Party (LIB/LP) (https://www.liberal.org.au), founded in the 1940s by Australia’s longest-serving Prime Minister, Sir Robert Menzies. Historically has served as a “big tent” organisation, agglutinating classically liberal and conservative groups. The second party in the coalition is the National Party (NAT) (https://nationals.org.au), which is a conservative party representing rural constituencies. At a federal level, this a permanent coalition - when elected the Liberal leader becomes the Prime Minister with the National leader serving as deputy. The Australian Greens (GRN) (https://greens.org.au) is considered the largest of the “minor parties”. One of the oldest green parties in the world, they are described as a left-wing, progressive party with a focus on environmental policies. On the political spectrum, they are perceived as being to the left of Labor. Minor right-wing parties like One Nation and United Australian Party (UAP), Fishers and Shooters, etc. Most of them are perceived as further right than then then Coalition. Most of the time don’t have any parliamentary representation, except of representation for One Nation and the UAP. Their support base is in rural areas, especially in North South Wales and Queensland. Minor left-wing parties, like Socialist Alternative and Socialist Alliance. None of these parties has ever attained federal political representation. Independents, which traditionally do not fit into the classical political spectrum. Historically independents didn’t have common positions, which changed in the last election with the arrival to Parliament of centrist “Teal” independents. Generally speaking, small parties do obtain some moderate representation in the Senate. Senators are elected under a different set of rules, which are of the scope of this project. 1.3 Problem statement and research questions As expected, general political knowledge has mapped distinct audiences to each group. According to this working-class people vote Labor, wealthy professionals and business owners are inclined to the Liberal Party, farmers prefer the Nationals and an inner city, young liberal population vote for the Green. Political science also postulates that people become more conservative with age and as they accumulate wealth. However, global and local events in the last 10 years have shifted some of those political narratives. In particular, both major parties have experienced internal friction when defining their policies towards climate change (an issue resonating with urban electorates and with growing effects in Australia but contentious with some businesses and unions involved in Coal and Gas exporting sector), housing (rising prices due, partly influenced by policies favouring the real estate market as an investment mechanism). According to the media, political commentary and the same parties, this has shifted traditional voting patterns where: There is an increasing divide between wealthy inner metropolitan areas, the suburbs, and regional and rural populations. In this divide, inner metropolitan areas seem to favour left-wing parties, and rural areas are conservative, leaving suburbs as the middle ground where economic issues are relevant. People are not shifting to conservative positions with age. In particular, Millennials are not voting for the Coalition due to climate policies and being locked out of the housing market. According to this, their vote is captured by either Labor or the Greens. Voters from historically Liberal (Party) wealthy, and classically liberal (as in liberalism) electorates (so-called “little l Liberals”) are dissatisfied with the Coalition’s perceived conservative turn, especially when it comes to climate change and positions on “moral issues”. In this narrative, these voters have supported the rise of the “Teal” movement (environmentally progressive, socially liberal, economically conservative/moderate). Another aspect usually considered in political analysis is the influence of ethnically diverse voters. Being a “migration nation” and with roughly half of the population being a migrant or a child of at least one migrant, culturally diverse communities are perceived as relevant political audiences. Within this context, this project attempts to study how population make-up may influence how Australian citizens may vote for a particular party. Specifically, the project will look into the following questions: Is there a demographic divide between the inner city and suburbia? ([7],[5]) What are the main demographic factors influencing political persuasion? This then will be used to examine some common political narratives against the 2022 election results, such as: Was the so-called “Teal Wave” supported by discontent moderate Liberal voters? ([8]) Are Millenials not becoming more conservative as they age? ([9],[10]) Is culturally diverse voting relevant? ([3]) This project does not aim to develop a forecast tool. A naive retrospective forecast of the recent 2022 is included in this report, however it is intention is to validate primary voting drivers. On the same line, this project does not consider the problem of forecasting the actual winner of each election, which can be defined as a different topic altogether. "],["data.html", "2 Data 2.1 Data Sources 2.2 Data Selection and Initial Transformation 2.3 Training, Validation and Testing Split 2.4 Data Exploration", " 2 Data 2.1 Data Sources Data used in this project comes from two sources, namely: The Australian Electoral Commission (AEC, https://www.aec.gov.au/ ). The national body overseeing and running federal elections, the AEC contains detailed election result records. All results for federal elections held in the 21st century are available online, through their Tally Room website [11]. The Australian Bureau of Statistics (ABS, https://www.abs.gov.au/) . The ABS provides a wide number of national statistics and is responsible to conduct a national census of population and housing every 5 years. Comprehensive census data is provided in multiple formats, including CSV files through Census Data Packs [12], available for censuses from 2006 onwards. Both organisations are the authoritative source for electoral and statistical data in Australia, and the data is provided openly. Although there are no quality issues, the way that data is provided presents other challenges: In both cases, data are provided in large volumes and exhaustive granularity. Data extraction and aggregation can be time-consuming and resource-intensive if not done effectively. Census data points are provided using the ABS own geographical standard - and only a small selection of census data is provided already aggregated for each Commonwealth Electoral Division. Conversion between ABS geographical structures and electoral divisions is not straightforward as there is no 1:1 correspondence. Both geographical reference systems are modified at each election and each census. Despite the best efforts of both organisations in keeping consistency, names of electorates, parties, and census attributes change over time, which requires keeping track of all those changes and mapping them accordingly. To assist in dealing with these issues and ensure repeatability, it was necessary to write code to guarantee some level of repeatability and consistency when extracting and transforming data. This resulted in three R packages being written to undertake this task: {auspol} [13] https://carlosyanez.github.io/auspol/), which extracts and presents electoral results. {auscensus} [14] https://carlosyanez.github.io/auscensus/, which allows to interact with Census Data Packs to extract different statistics across geographical units, and across censuses. {aussiemaps} [15] https://carlosyanez.github.io/aussiemaps/, which assists with aggregating census data into electoral divisions, by matching and apportioning different geographical structures. Although this project’s scope is data analysis, writing this three packages was a significant task, requiring as large time investment. Appendix B presents a more detailed view on their design principles. Additionally appendices C, D, and E contain a copy of some of their vignettes explaining their use. With their help, it was possible to build a basic data extraction and transformation pipeline, which is represented by figure 2.1. Figure 2.1: Flow of data from sources to dataset In four steps, the extraction process consists of: Census data was extracted from the respective Census Data Pack using {auscensus}. Using the package workflow, key attributes were identified in each census, extracted from the respective files and given common names. Data were extracted for statistical areas and apportioned into Commonwealth Electoral Divisions by overlapping area, with the help of functions written into {aussiemaps} Primary vote results for each division were extracted using the {auspol} package. All the data was stored in a local database, from where it was extracted and put together in a single dataset. From there, the “raw” data was further processed and stored in a single “consolidated” dataset. This dataset has been further refined throughout the data exploration and modelling steps. Processing sources into a usable dataset represented a particular arduous tasks. Although there were no issues in terms of missing or erroneous data, the previously mentioned challenges meant that intense processing was required. Getting data into the right shape consisted of: Obtaining data at the most granular spatial division available in the Census packs (e.g. Statistical Area 1 (SA1) for the 2011,2016 and 2021 censuses). For reference for the 2021 Census there were 57,523 SA1 areas in Australia. Mapping SA1 data into Commonwealth Electoral Divisions. For SA1s overlapping more than one electoral, data was apportioned based on overlapping areas. Converting all values from absolute (e.g. number of votes, number of people in a particular demographic category) to percentages against total number of voters (elections)/ individuals (census) in the respective electorate. 2.2 Data Selection and Initial Transformation There were a number of considerations that were taken to obtain the dataset that was eventually used, including what and how to represent the statistics and how to best align census and election data. 2.2.1 How to present the numbers The first point to consider was how to represent the data in a way that is consistent across electorates and time. As mentioned in the introduction, although the aim behind the creation and geographical distribution of Commonwealth Electoral Division is to provide equal representation in Parliament for every Australian, this is not completely possible in practice, resulting in electorates varying in population. This is mainly due to the large variation in population density across Australia, combined with a constitutional mandate to guarantee a minimum number of seats per state or territory. For this reason, it is deemed necessary to represent all voting and demographic statistics as a percentage of each electorate’s roll or population. This is also useful when comparing statistics across time. The second point to address is the correspondence between census and election data. Since the election the census cycle (5 years) does not match the electoral cycle (determined by the incumbent government, with a 3-year term for the House of Representatives), there is a potential problem of the census data not being completely representative of the population on a given election day. Figure 2.2 presents the best matches between both events held in the 21st century. Figure 2.2: Census and Elections Timeline Considering the census data available and selecting the elections closer to each census, four sets of events were selected for data extraction. They are presented in table 2.1. Table 2.1: Census-Election pairings Census Election 2006 2007 2010 2011 2016 2016 2021 2022 Please note that this selection will remove half of the election events within the period, which may affect model accuracy. However, since the objective is not to obtain an accurate prediction this has been accepted as an acceptable trade-off to avoid, instead of having to interpolate demographic statistics. 2.2.2 Electoral Data In the case of the electoral data. not much processing was required. The source data already contains records of primary voting for each electorate. The only adjustment was to reclassify the vote into four groups (referred to as parties in this document): ALP for the Australian Labor Party. COAL representing the Coalition, made of the Liberal Party, the National Party, the Liberal National Party of Queensland 3 and the Country Liberal Party in the Northern Territory 4 . GRN for the Australian Greens. Other to collect votes from any other candidates, including minor parties and independents. A data sample is presented in table 2.2. Table 2.2: Sample extraction - Canberra 2022 Year Division Abbreviation Party Votes Percentage 2022 Canberra ALP Australian Labor Party 34,574 45.20 2022 Canberra GRN The Greens 19,240 25.15 2022 Canberra COAL Liberal (Coalition) 16,264 21.26 2022 Canberra Other Other Parties 6,417 8.39 2.2.3 Census Data When it comes to Census data, a number of considerations had to be tackled during extractions, namely: Large volumes of data. Each census collected a large number of statistics. For instance, the data release for the 2022 Census contains 62 different tables, ranging from 8 5 to 1,590 6 attributes. Data aggregated per electorate. Although the ABS provides statistics for non ABS geographical structures, this only includes a subset of all data points collected. Thus, in many cases is necessary to extract data for granular-level ABS units (SA1 in 2022) and aggregate them into electoral divisions. Without knowing the population density for each SA1, values have been approximately apportioned using areas. Consistency across time. Due to the changing nature of a Census (to better serve its purpose), there are some minor variations in how data is collected and aggregated from Census to Census. To obtain a first selection of potentially relevant demographic variables to extract, existing literature and journalistic sources were consulted ([1], [2], [3]). Since many variables are colinear by definition (e.g. income groups) or they are closely related (e.g age and relationship status), the initial selection was inspected. After iteration, a resulting set of 55.00 attributes was chosen, which can be classed into the following categories: Income: Distribution of the population in pre-set income brackets. The highest income bracket includes everyone earning 2,000 dollars or more each week. Education Level: Distribution of educational achievement (from incomplete secondary to vocational education and academic degrees). Age: Year of birth is captured in the census, which was grouped into generational cohorts. The four groups of interest are Baby Boomers (1946 to 1964), Generation X (1965 to 1980), Generation Y (1981 to 1996) and Generation Z (1997 to 2021). Relationship status: Variables describing civil status (e.g. living alone, married, in a de facto relationship). Household type: Descriptors of type of housing, (e.g. standalone house, semi-detached, flats). Household tenure: Descriptors of house ownership, rental or another arrangement (e.g. public housing). Citizenship: Percentage of the population that hold Australian citizenship. Although non-citizens are not entitled to vote, this variable can be taken as a proxy for the relative integration of migrant communities into civic life. Religion: Percentage of the population declaring to profess a religion. For this analysis, large and high-growth religious groups were selected. For practical reasons and to use as a potential community proxy, the values of Anglican, Presbyterian and Uniting followers were merged into a single statistic. Language: Languages spoken in the community. Similar to religion, a selection of relevant languages have been included to reflect the historic and current migrant communities. Additionally, each electorate was classified as metropolitan if it lies within the boundaries of Australian capital cities or non-metropolitan, when it is not the case. Altogether, these variables try to reflect wealth and education (cited by [1] as key factors influencing political persuasion), as well as the stage in life and belonging to a particular migrant community (sometimes cited as an influential factor, for instance in [3]). A sample of the resulting dataset is present in table 2.3. A detailed list of all variables is presented in appendix A. Table 2.3: Dataset sample Age Household Language Relationship Income Election Year Division Australian Citizens Baby Boomers Gen Y Rented Chinese Italian Single Parent 2000 or_more 2022 Barker 88.90 25.93 17.58 19.06 0.44 0.34 4.44 5.83 2007 Bass 90.90 25.86 22.57 21.11 0.48 0.27 5.13 1.46 2016 Brand 77.56 14.52 24.16 23.34 0.70 0.30 4.90 9.07 2010 Bruce 76.36 19.17 23.13 25.19 10.14 2.61 4.53 3.81 2016 Corangamite 89.22 21.47 18.69 19.24 0.84 0.51 3.79 6.55 2022 Cowan 82.32 19.72 24.01 22.42 3.72 2.54 5.26 8.99 2007 Cunningham 87.97 24.92 22.63 23.20 1.80 2.35 4.50 3.56 2010 Dickson 89.21 15.38 22.13 18.84 0.46 0.37 4.11 6.32 2007 Forde 85.80 26.27 22.84 23.53 0.37 0.19 4.72 1.43 2022 Fraser (II) 75.76 16.44 30.22 33.45 5.28 1.30 5.30 9.67 2010 Grey 90.50 21.30 18.18 20.78 0.14 0.42 4.48 3.79 2007 Hasluck 84.95 26.40 23.37 17.73 0.93 1.60 5.23 2.21 2016 Hasluck 80.64 18.99 21.55 16.88 1.49 1.10 4.59 8.38 2016 Herbert 86.18 15.80 23.10 35.03 0.48 0.37 5.47 5.82 2016 Jagajaga 87.23 19.80 20.61 18.70 3.88 2.46 4.24 11.05 2007 Kennedy 88.60 26.56 21.24 24.93 0.12 2.33 4.19 2.05 2016 Lalor 73.70 11.75 29.72 27.18 4.61 1.31 4.34 5.81 2022 Lalor 72.94 12.41 30.16 28.79 2.77 0.93 4.28 8.89 2010 Makin 88.20 19.33 21.07 14.31 0.97 1.61 4.88 2.73 2007 Moncrieff 76.47 25.75 21.74 31.20 1.46 0.73 4.68 3.34 2010 Moore 81.00 15.14 20.40 19.37 1.13 0.67 3.84 10.48 2016 Newcastle 88.84 17.95 23.04 28.57 1.68 0.47 4.94 8.45 2007 North Sydney 78.80 24.81 17.71 38.21 5.70 1.03 3.05 16.10 2010 North Sydney 78.72 15.81 29.32 36.11 9.94 1.08 3.26 20.27 2010 Werriwa 84.61 13.37 23.09 19.09 2.07 2.05 5.36 2.69 2.3 Training, Validation and Testing Split After obtaining the data, the election results and census statistics for the 2021/2022 cycle were set aside, since they have been used as testing dataset, in a election forecast attempt. The remaining data has been used in exploratory analysis, data mining and creating and fitting models. 2.4 Data Exploration In total, the resulting dataset is made up of 4 response variables and 55 potential predictors, plus identification attributes like division name and election year. As expected the many covariates exhibit moderate to high collinearity. Also, it is possible to observe some loose correlation between some of the covariates and some of the responses. The complete list of variables is presented in appendix A. As an example, figure 2.3 shows a somewhat weak correlation between Coalition primary vote and the percentage of the Baby Boomers. Figure 2.4 presents the correlation values for religion and language variables, where is possible to see: A positive correlation between monolingual English speakers and membership in Anglican, Presbyterian and Uniting churches. Together, they are likely proxies for Anglo-Celtic population. Similarly, there are somewhat expecting origins that most likely indicate concentrations of linguistically and culturally diverse pockets, e.g. Hinduism and South Asian languages, Catholicism and Italian, and Buddhism and East Asian languages. Figure 2.3: Correlation between Coalition vote and Baby boomer population Figure 2.4: Correlation for selected covariates Additionally, after a detailed inspection, it is worth noticing that : There is no apparent change in the relationship between a given covariate and the responses when broken down by state or capital city. There are no obviously distinguishable differences when splitting results by each election. 2.4.1 Dimensionality reduction using Multiple Factor Analysis Given the large number of colinear covariates, it is worth exploring if a reducation of dimensionality could help to better measure variation in a meaningful way and in a more manageable number. To achieve this, multiple factor analysis (MFA) [16] was used as the clustering algorithm. MFA is essentially an extension of Principal Component Analysis that can deal with categorical and numerical variables, as well as variables that belong to groups (e.g in this case, Income, Religion, Household Tenure, etc.). The resulting scree plot and cumulative variance are presented in figure 2.5. Figure 2.5: Scree plot and cumulative variance Figure 2.6 presents group biplots for the 8 most important dimensions. Unfortunately, there is no straightforward representation except with Dimension 2 and Education variables. Figure 2.6: Group plots for first 8 dimensions 2.4.2 Electorate segments Normally when characterising votes, Australian politicians and political media make a distinction between inner-city voters (touted as wealthy and progressive), suburbia (“middle Australia”), and the bush and outback areas (conservative, “battlers”, “real Australia”). Therefore, it is of interest to explore if this can be substantiated by demographic attributes, as it may have an impact on primary voting. Using all demographic variables a clustering algorithm has been applied to identify those clusters. Different clustering approaches were, eventually choosing to: ignore Census years and pool all records in a single pool. transform all demographic attributes to represent the difference between each data point and their corresponding national value (in the same year). use Hierarchical Density-Based Spatial Clustering of Applications with Noise (HDBSCAN) [17], a density-based hierarchical clustering algorithm. HDBSCAN is essentially a density-based method to find common density areas, for which then a hierarchical analysis of the results is used to heuristically determine the number of processes. This is an appropriate method in this scenario. This results in 3 distinct clusters of electorates. When presented in a map, it is possible to obtain figures 2.7 and 2.8 for 2016. Figure 2.7: Clusters for 2016 Election Figure 2.8: Clusters for 2016 Election - Interactive These three clusters are: cluster 0 seems to mostly contain electorates located in the inner cities, especially in Sydney and Melbourne. These areas tend to be more affluent, either “established” or “gentrified” suburbs. Notably, it also contains the three northernmost, remote electorates. cluster 1 comprises all regional areas outside state capitals (with the exception of Hobart in Tasmania). cluster 2 largely represents “suburbia”. It is also more prevalent in Brisbane and Perth compared when comparing capital cities. Revisiting the demographic attributes can help to understand how these clusters differ from each other. A selection of those variables is presented in figure 2.9. Figure 2.9: Selected attributes, coloured by cluster. Even though it is possible to find electorates from every country across the spectrum for every attribute, it is possible to observe that cluster 0 tends to concentrate areas with significant Millenial, highly educated, and relatively affluent populations. These areas also tend to attract newer migrants (lower numbers of citizens) and therefore they possess higher percentages of multicultural populations (such as Chinese speakers). Cluster 1 tends to concentrate older people, with lower percentages of tertiary and vocational education and possibly higher proportions of Anglo-Celtic Australians. Cluster 2 seems to be sitting in the middle of the other two clusters. Adding these findings to the geographical locations seems to confirm there is some element of truth in the stereotypical classification of voters. In Queensland and the Northern Territory, the Liberal and National branches have merged. Elected federal MPs and senators sit with Liberals if they come from an urban area, or the Nationals when they represent a regional/rural/remote electorate.↩︎ In Queensland and the Northern Territory, the Liberal and National branches have merged. Elected federal MPs and senators sit with Liberals if they come from an urban area, or the Nationals when they represent a regional/rural/remote electorate.↩︎ 02 -Selected Medians and Averages↩︎ 09 - Country of Birth of Person by Age by Sex↩︎ "],["method.html", "3 Method", " 3 Method Going back to the introduction, the objective of the exercise is to determine if demographic attributes can influence or explain voting patterns. This can be restated into determining if demographic attributes can serve as predictors of primary voting. In mathematical terms, this can be expressed in a simple way by equation (3.1). \\[\\begin{align} \\mathbf{Y} = f(\\mathbf{X}) \\tag{3.1} \\end{align}\\] where \\(\\mathbf{Y}\\) represents a vector with primary voting for an electorate, and \\(\\mathbf{X}\\) represents the vector of respective demographic attributes. In this simple form, other factors that may influence voting are not explicitly shown in the equation. However, these factors may be difficult to quantify as they potentially relate to a myriad of factors including the state of the economy, foreign affairs, perceptions about the governing party or any party in the election, or the mood of the times. To solve this challenge, it is possible to naively assume tools like polling can effectively capture the zeitgeist. If that is the case, it is possible to split the original function \\(f()\\) into a poll component and a demographic component. Since it is not in the scope of this project, we can also ignore the polling component and focus on the difference between the absolute value and polling results. To further simplify things, we can temporarily assume that polling results are uniform across the country, thus demographic statistics only influence the difference between the electorates’ primary vote and the respective national percentage. This is expressed by equation (3.2), which also accounts for general error. \\[\\begin{align} \\mathbf{Y} = f(\\mathbf{X}) + \\epsilon \\tag{3.2} \\end{align} where \\\\ $\\mathbf{Y} = \\mathbf{Y} - \\mathbf{Yp}$ \\\\ $\\mathbf{X} = \\mathbf{X} - \\mathbf{Xn}$ \\\\ and \\\\ $\\mathbf{Yp} : \\textrm{Primary voting polling results}$ \\\\ $\\mathbf{Xn} : \\textrm{Demographic values at national level}$ \\\\ \\] This second iteration does not take into account that in different electorates, different demographic attributes may have a different effect on the primary vote. For instance, in more progressive areas, a higher proportion of younger people may have a greater effect on left-leaning preferences when compared with similar proportions of younger people in rural electorates. Equation (3.3) is intended to acknowledge those differences. \\[\\begin{align} \\mathbf{Y_i} = f_i(\\mathbf{X_i}) + \\epsilon \\tag{3.3} \\end{align} where \\\\ $\\mathbf{Y} = \\mathbf{Y} - \\mathbf{Yp_i}$ \\\\ $\\mathbf{X} = \\mathbf{X} - \\mathbf{Xn_i}$ \\\\ \\\\\\] It is worth noticing that \\(i\\) represents a particular grouping of electorates, and for each group predictors can be different - as different attributes may have different impacts. In terms of choosing an appropriate \\(f_i\\), it would depend on the objective of the model. Given the large number of predictors and requirements on interpretability and accuracy, this could be a complex task. In this particular case, the focus is on understanding the factors that influence voting rather than producing accurate electoral predictions. After examining possible alternatives a model in the regularised regression family is deemed as an appropriate choice. The selection is based on the following factors: Regularised models are a good fit in cases with a large number of variables. Lasso regression in particular is a good method for variable selection, helping to identify the most relevant parameters. Regularised regression models can also deal with predictors exhibiting a high level of collinearity. The results provide an straightforward interpretation on how each predictor influences the results. In the context of this projects, that is a more important priority than forecasting accuracy. Consequently, the task at hand consists in finding the regularised regression coefficients for the set of formulas represented by equation (3.4) \\[\\begin{align} \\left(\\begin{array}{c} y_{i1}\\\\ y_{i2}\\\\ ... \\\\ y_{in}\\\\ \\end{array}\\right) = \\left(\\begin{array}{cccc} \\beta_{i11} &amp; \\beta_{i12} &amp; ... &amp; \\beta_{i1m}\\\\ \\beta_{i21} &amp; \\beta_{i22} &amp; ... &amp; \\beta_{i2m}\\\\ ... &amp; ... &amp; ... &amp; ... \\\\ \\beta_{in1} &amp; \\beta_{in2} &amp; ... &amp; \\beta_{inm}\\\\ \\end{array}\\right) \\left(\\begin{array}{c} x_{i1} \\\\ x_{i2} \\\\ ... \\\\ x_{im} \\end{array}\\right) + \\left(\\begin{array}{c} \\epsilon_{i1}\\\\ \\epsilon_{i2}\\\\ ... \\\\ \\epsilon_{in}\\\\ \\end{array}\\right) \\tag{3.4} \\end{align}\\] A complication of this approach is that requires separating the electorates into different segments. This requires having a method to map electorates into clusters if such an assignment is not provided. Thus, the modelling task consists of: A classification model map new records into clusters with similar electorates. A regularised regression model to determine how demographic factors influence primary voting for each party. "],["modelling.html", "4 Fitting and analysing a model 4.1 Cluster classification 4.2 Regularised regression", " 4 Fitting and analysing a model As mentioned in the previous section, this exercise requires fitting both a classification and regularised regression model. 4.1 Cluster classification Although HDBSCAN can be used to map new data points into the existing clusters, a different approach has been taken: to “reverse engineer” the clusters by training a classification model. The intent behind this is to leverage the trained model to identify the main contributors to the classification. Different models were tried, starting with basic tree partitioning. After a couple of trials, a random forest model was selected. Although not directly interpretable like a simple hierarchical tree, the use of variable importance plots still allows to understand which variables are the most significant influencers in the classification algorithm. This is deemed an acceptable trade-off between increase accuracy and explainability. The model was trained with: Census data from 2007 to 2016 (mirroring elections between 2006 to 2016), which was used for training and validation. Values for demographic attributes, which were centred around the overall percentage for said attribute, for the respective cluster. Clusters previously obtained with HDBSCAN, used as the response variable. Since the year has been “discounted”, all values will be considered as one pool. An assumption has been made that the period in question is short enough to drastically affect the clustering model. If demographic values change - cluster assignment (for instance because of re-distribution), the effect is similar to being a different electorate. The initial fitting produces the results presented in tables 4.1 and 4.2. A variable importance plot is also presented in figure 4.1. Table 4.1: First Model - Metrics Metric Estimate Accuracy 0.8333 ROC AUC 0.9621 Table 4.2: Accuracy by Cluster - First Model Cluster Accuracy 0 0.7742 1 1.0000 2 0.7576 Figure 4.1: Variable importace - First classification model From the chart above, it is possible to see that only a handful of variables significantly contribute to the cluster selection. Aiming for simplification, a random forest model with reduced variables was also trained, achieving similar results in accuracy and variable importance (shown in tables 4.3 and 4.4, and figure 4.2. Table 4.3: Improved Classification Model - Metrics Metric Estimate Accuracy 0.8667 ROC AUC 0.9531 Table 4.4: Accuracy by Cluster - Improved Model Cluster Accuracy 0 0.8065 1 1.0000 2 0.8182 Figure 4.2: Variable importace - Improved classification model Looking at variable importance, it is possible to appreciate that cluster placement can be driven by : Location in a large metropolitan area or the regions. Population density, (type of household) Life stage (relationship) -Wealth (type of household ownership) Multicultural make-up of the area - first and second-generation migrants are more likely to be bilingual - thus the proportion of monolingual people is a proxy variable for this. This picture fits with the media narrative about differences in the electorate (quote). 4.2 Regularised regression Due to the large number of variables, the first step is to see if it is possible to identify which factors may be of influence. For this, a Lasso regression was conducted with the sole intent of variable selection. Then an elastic net was fitted, with the goal to optimise the root square mean error (RMSE). This process was done separately for each cluster. Although precision is not a key objective of this exercise, table 4.5 presents the best RMSE result per cluster, alongside the selected tuning parameters. Table 4.5: Best regression results by cluster RMSE Cluster \\(\\alpha\\) \\(\\lambda\\) Overall GRN ALP COAL Other 0 0.5416 0.5191 5.9363 5.7787 5.9668 7.4913 3.9802 1 0.9976 1.5452 5.9408 2.8817 6.1343 6.8756 6.9258 2 0.8408 0.5437 4.8961 1.6438 5.4578 6.0699 5.1531 However, the main objective is to understand the coefficients for each covariate, which are presented in figures 4.3,4.4 and 4.5. Figure 4.3: Resulting coefficients - cluster 0 Figure 4.4: Resulting coefficients - cluster 0 Figure 4.5: Resulting coefficients - cluster 0 It is worth noticing that some of the selected covariates may not be relevant in all electorates, by account of their small absolute various or being relatively uniform across the segment. For this reason, the covariates in figures 4.3,4.4 and 4.5 have been ordered by their respective variance - when assessing their overall effect / relevance this must also be taken into account. When looking at each cluster, it is possible to summarise the different demographic effects as follows: In cluster 0 (mostly inner metropolitan areas) political divides are drawn across wealth, religiosity (i.e. values) and generational lines. In these areas, coalition vote is associated with higher percentages of followers of Anglican, Uniting and Presbyterian churches, people on higher income and Baby Boomers. Labor vote is turn driven by followers of the Catholic Church (partially a reflection of the historic association between the Australian Catholic Church and the labour movement, and Irish and Italian migration) and Millennials. There is some association between less-advantaged populations and social and community housing. Green vote is also driven by Millennials, but unlike Labor there is a positive association with higher income groups. Green votes are also related to the irreligiosity o secular population groups. In cluster 1 (regional areas, including mid-size cities and rural areas), demographic variance is smaller. However, when it happens, it follows a different pattern from the main cities. In this area, the Coalition vote has also a positive association with religiosity - this is not dissimilar to cluster 1, especially when considering that Anglicanism/Presbyterianism/Unitiarianism are the largest religious groups in the area). However, a key difference with the cities is that in case higher wealth groups have a negative association with Coalition vote. Labor vote in these areas is driven by a larger proportion of Australian citizens and higher-income voters. Overall, it seems there are no demographic factors influencing Green votes in these areas. Interestingly, age does not rank as a variable of importance. As expected, cluster 2 (metropolitan suburbia), shares some traits with their inner-city counterparts, showing the same associations along religious, age and wealth lines. However, there are a larger number of predictors associated with the multicultural make-up of the electorates. Those covariates tend to have a positive effect on Labor vote and a negative influence on Coalition and Green voting. This difference is interesting, especially considering inner city areas are as multicultural as the suburbs. "],["results.html", "5 Results 5.1 Forecasting the 2022 Federal Election 5.2 The Teal Wave 5.3 The Green Wave 5.4 The Changing Face of Suburbia", " 5 Results 5.1 Forecasting the 2022 Federal Election The previously fitted model can be used to attempt to retroactively forecast the 2022 Federal Election. Through this process, it is possible to illustrate the model’s strengths and shortcomings in capturing how demographic factors succeed and fail to capture the change in voting patterns. This exercise uses the results from the 2021 Census of Population and Housing. The base voting percentages are taken from the last Newspoll prior to the election [18] . Newspoll is usually considered a good predictor of the Australian election. The values are shown in table 5.1. Please note these values are national, but since there is no cluster-level data, they will be used nonetheless. Table 5.1: NewsPoll primary vote forecast, 20 May 2022 Party Forecast COAL 35% ALP 36% GRN 12% Other 17% The first step in the forecasting process is to map the electorates into three clusters. The result is presented in figure 5.1. Figure 5.1: Clusters in 2022 Election Figure 5.2: Clusters in 2022 Election - Interactive After clustering, the regression models have been used to calculate a predicted outcome. Results have been transformed back to absolute values and then compared against actual and historical results. This is presented in figure 5.3, together with RMSE values in table 5.2. Figure 5.3: Comparison between prediction and election results Table 5.2: RMSE per cluster, overall and by parrty cluster Overall GRN ALP COAL Other 0 10.56 9.48 9.42 8.43 15.04 1 10.37 4.16 10.21 14.35 10.11 2 8.26 3.16 7.51 6.05 13.40 As expected, the results fail to adequately forecast primary voting, especially when it comes to Other parties and independents. However, it can be used as a tool to analyse the vote dynamics. 5.2 The Teal Wave A particular phenomenon of the last election consisted in the so-called “Teal Wave”, where centrist independents campaigned in traditional Coalition electorates. Most of these electorates are located in inner-city, wealthy areas of Melbourne and Sydney, where voters have consistently voted Coalition since the Australian Federation. Right-leaning voters in these areas are perceived as moderate, socially liberal (“little-l liberals”) who were dissatisfied with a perceived conservative turn in Coalition politics. Teal candidates managed to unseat incumbent MPs - did they in effect capture the dissatisfied Coalition base? The results and predictions for 4 cases are presented in figure 5.4. Figure 5.4: Example 1: Teal Wave The answer in this case seems to indicate that the dwindling Coalition vote may not be entirely related to a new teal competitor. When comparing these results with demographic statistics from figure 5.5, these generational change is happening at the same pace or slower than the rest of Australia (shown by flat or growing differences in the Baby Boomer population). The same applies to the percentage of high earners. Nevertheless, the relatively low error in the prediction for the Coalition seems to indicate that the new independents managed to capture Labor and Green voters - likely of a “Labor Right” and “Blue Green” persuasion considering the areas’ affluence - rather than attracting a dissatisfied Coalition base. Figure 5.5: Selected demographics for teal seats 5.3 The Green Wave Another feature of the past election was the increase in the number of Green Party MPs. In addition to the division of Melbourne, green candidates also won the seats of Griffith and Ryan in Brisbane. Again, do these victories have a demographic driver? Are there any differences between these electorates and contiguous divisions, and between them and other electorates where the Green have been strong contenders? Figure 5.6 shows the prediction of the latest and historic election results. Figure 5.7 presents selected demographic attributes for those areas. Figure 5.6: Green Voting Figure 5.7: Demographics in Green strongholds All four cases show a similar story of continuous growth of the Green vote and progressive decline of Coalition and Labor polling results. However, there are two distinct dynamics at play. In three Queensland electorates (Griffith, Ryan and Brisbane) the Green’s growth is sustained in a smaller percentage or older population, being replaced by a younger, wealthier, more secular electorate. In the Victorian seat of Wills, income growth is smaller, generational renewal is slower and although the rise in secularism is faster than average, the area used to have a very high concentration of Catholic followers (Northern suburbs of Melbourne being a popular area amongst post-war Italian migrants). These factors have given Labor a stronger hold in the area. 5.4 The Changing Face of Suburbia For a comparison outside inner city areas, four suburban electorates have been chosen: Hasluck (Perth), Menzies (Melbourne), Fowler (Sydney) and Kingston (Adelaide). Their respective predictions and results are presented in figure 5.8. A selection of key demographic variables is presented in figure 5.9. Figure 5.8: Suburban Voting Figure 5.9: Demographics in suburban seats From both figures, there are perhaps four different stories in these electorates: In Hasluck (WA) [19], the changes have the top maybe be driven by generational renewal. The “Other” vote increase includes progressive independents and localist parties, which may have influenced the lower-than-predicted results for the Greens. In Menzies (VIC) [20], Coalition numbers decline influenced by generational change and a large decrease in the percentage of standalone houses. This abrupt change took place as an effect of the 2021 redistribution, where semi-rural areas moved into another electorate [21]. This a good example where the existing model was able to effectively predict the primary vote based on those demographic changes. In Fowler (NSW) [22], an independent candidate altered Labor’s trend. In these cases, a community-based candidate captured the multicultural vote from a “parachuted” Labor nominee - which is a variable not considered in the model. [23] In the case of Kingston (SA) [24], it seems difficult to explain the results by effect of demographic changes - even when "],["conclusion.html", "6 Conclusion", " 6 Conclusion In summary, this project presents an attempt to understand and explain changes in primary voting through the influence of the demographic composition of Australian federal electorates. Seeking easy interpretability, the approach involved the use of clustering to identify groups of electorates with similar composition, for which simple regularised regression models were developed with the aim of identifying the main demographic drivers of voting. In general terms, the model presented in this document achieves the goal of identifying key demographic characteristics the affect primary voting for a particular political party. Although accuracy was not a key consideration, the model managed to produce moderately accurate results. Nevertheless, reasonable improvements may be achieved by exploring some the following: Further refining the segmentation into a recommender-type model, where not only similarity clusters are refined by other factors like State and degree of rurality are considered. Consider the introduction of a longitudinal element to account for the electorate’s history and the influence of incumbency. Explore how to address the mismatch between election and census cycles to use the data from all the elections. Explore how federal and state elections influence each other. Taking aside issues regarding the effectiveness of this model, it is also relevant to raise a note of caution about how to interpret the model correctly. By using demographic data is important to keep in mind that certain attributes must be interpreted as proxies of attitudes and values that have an effect on how voters choose. It is very important to make this distinction and avoid statements such as “Community XYZ votes/don’t vote for Party A”. This is definitely not an aim behind this exercise and it should not be interpreted this way. Going back to the problem statement presented in {#problem-statement}, it is worth reminding that this project is focused on primary voting only. Even though primary voting is useful to understand general inclinations and may serve as a good based to guess who will be elected, this project does not extend into any analysis of who is eventually elected into Parliament. A natural extension of this work would be to understand how the make-up of a particular electorate influence how voters of a certain party direct their preferences. This is now especially relevant as the Greens and Independents are becoming competitive challengers in many divisions (becoming three-way contests), and many formerly Labor and Coalition electorates have become marginal. Finally, it is also important to recognise that “all models are wrong but some are useful”. Capturing and quantifying human behaviour can be a challenging task, but in this case, having a tool for analysis can prove value for parties, the media and the voters to check the accuracy of political narratives. "],["appendix-variables.html", "A Detailed list of variables A.1 Identification variables A.2 Response Variables A.3 Covariates", " A Detailed list of variables The below tables present all variables eventually used in this project. Please note that throughout the analysis and modelling all variables have eventually been transformed into difference in percentage against national or cluster percentages, yet the same basic definitions apply. A.1 Identification variables The below variables constitute identify each data point, i.e. they serve as each record’s “primary key”. Table A.1: ID Variables Variable Description election_year Year the election was held DivisionNm Name of the Commonwealth Electoral Division StateAb State of Territory where the Division is located Metro_Area Name of Greater Metropolitan Area A.2 Response Variables The response variables represent primary voting results. Table A.2: Response Variables Variable Party ALP Australian Labor Party COAL The Coalition, either Liberal or National Party GRN Australian Greens Other Consolidated results of all other minor parties and independents A.3 Covariates The following covariates represent data collected by the Australian Census of Population and Housing. Variable relating to personal attributes are self-declared. Table A.3: Response Variables - citizenship and Metropolitan Flag Variable Description Australian_Citizens Percentage of People holding Australian citizenship Metro Flag indicating if electorates lies within a metropolitan area Table A.4: Response Variables - Age Variable Description Age_Baby_Boomers Percentage of Baby Boomers (born between 1946 and 1964) Age_Gen_X Percentage of Gen X people (born between 1964 and 1980) Age_Gen_Y Percentage of Millenials (born between 1981 and 1996) Age_Gen_Z Percentage of Gen Z people (born between 1997 and 2012) Age_Silent_Gen Percentage of Silent Generation people (born between 1928 and 1945) Table A.5: Response Variables - Language Variable Description Language_Arabic Percentage of Arabic speakers Language_Chinese Percentage of speakers of a Chinese Language (including Mandarin, Cantonese and Others Language_East_Asian Percentage of speakers of an East Asian Language (excluding Chinese languages Language_English_Only Percentage of monolingual English speakers Language_Greek Percentage of Greek speakers Language_Italian Percentage of Italian speakers Language_European Percentage of speakers of other European Languages Language_Indigenous Percentage of speakera of an Australian indigenous language Language_Indonesian Percentage of Indonesian speakers Language_Pacific Percentage of speakers of a Pacific language Language_Philippines Percentage of speakers of a Philippino Language Language_South_Asian Percentage of speaks of a South Asian language (including Hindi, Tamil, Urdu, Nepali and others) Language_Western_Asian Speaker of a Western Asian Language (excluding Arabic) Table A.6: Response Variables - Religion Variable Description Religion_Anglican_Uniting_Presbyterian Percentage of followers of Anglicanism, Uniting and Presbyterian churches (combined). Religion_Buddhism Percentage of followers of Buddhism, of any denomination Religion_Catholic Percentage of followers of the Roman Catholic Church, of any rite Religion_Christian_Orthodox Percentage of followers of any Christian Orthodox church (excludes Eastern Rite Catholics) Religion_Other_Christianity Percentage of followers of other Christian Churches (other Protestant, Pentecostals, and other Christian) Religion_Hinduism Percentage of followers of Hinduism Religion_Islam Percantage of followers of Islam, of any denomination Religion_No_Religion_Secular Percentage of people self-declared as atheist, non-religious, agnostic or secular Table A.7: Response Variables - Household income Variable Description Income_1_to_999 Percentage of households with a total weekly income between 1 and 999 (Australian) dollars Income_1000_to_1999 Percentage of households with a total weekly income between 1,000 and 1,999 (Australian) dollars Income_2000_or_more Percentage of households with a total weekly income over 2,000 (Australian) dollars Income_Negative Percentage of households with a negative total weekly income Income_Not_Stated Percentage of households whose total weekly income was not stated Table A.8: Response Variables - Household type Variable Description Household_Flat Percentage of households that are flats (appartments) Household_Standalone Percentage of standalone households Household_Semi_detached Percentage of of semi-detached households (townhouses, villas) Household_Other Percentage of other types of housing structures Table A.9: Response Variables - Household tenure Variable Description Household_Owned_outright Percentage of households owned outright Household_Owned_with_a_mortgage Percentage of households whose owners hold a mortgage Household_Rented Percentage of households rented by their inhabitants Household_Social_or_community Percentage of social and community housing Household_Tenure_other_or_not_stated Percentage of households, for which the tenure type was not stated Table A.10: Response Variables - Highest Educational Attainment Variable Description Education_Diploma_or_Certificate Percentage of the population whose highest educational attainment is vocational education Education_Bachelor Percentage of the population whose highest educational attainment Bachelor degree Education_Graduate_Diploma_or_Certificate Percentage of the population whose highest educational attainment is a graduate diploma or graduate certificate Education_Postgraduate Percentage of the population whose highest educational attainment is a postgraduate degree (Master or higher degree) Education_Not_Stated Percentage of the population whose highest educational attainment was not stated Table A.11: Relationship in Houselhold Variable Description Relationship_Child_under_15 Percentage of people 15 years of younger Relationship_De_Facto Percentage of people in a de facto relationship Relationship_Group_Household Percentage of people living in a group household (e.g. flatsharing) Relationship_Living_Alone Percentage of people living alone Relationship_Married Percentage of married people Relationship_Single_Parent Percentage of single parents Relationship_Non_dependent_Child Percentage of people with the parents but not dependant (e.g. adult children living in family home) Relationship_Other_Relationship Percentage of people with other type of relationship to the rest of the houselhold (e.g. senior parents in child’s home) Relationship_Unrelated_in_family_household Percentage of people living in family home but unrelated to family groups (e..g lodger) "],["appendix-packages.html", "B R Packages B.1 Retrieving, distributing and storing data B.2 Processing, aggregating and presenting results B.3 Coding and documentation practices", " B R Packages Although this project is at its core an analytical exercise, the nature of the data sources meant that significant effort was needed to select, requiring the implementation of a consistent framework to find, extract and process. For this reason, it was deemed appropriate to create software packages to separate this from the proper analytical stage of the work. All the code was organised into 3 R packages, namely: {auspol} Which provides an interface to extract and visualise electoral results for the House of Representatives (https://carlosyanez.github.io/auspol). {auscensus}, designed as a “Swiss Army knife” tool set to interact with Census Data Packs (https://carlosyanez.github.io/auscensus). {aussiemaps}, which contains granular maps of Australia and enables geographical aggregation of census data (https://carlosyanez.github.io/aussiemaps). Although these three packages are slightly different, their basic architecture shares some common concepts: Retrieving and storing data. Processing, aggregating and presenting results. Coding and documentation practices. B.1 Retrieving, distributing and storing data For the required data there was no programmatic resource to access the relevant data, or it was deemed inadequate due to the large volumes of initial data required in the project. Most of the data is available for manual download. The large amount of data meant it could not be distributed as part of the package. Such a large amount of data cannot be stored directly on a GitHub repository either. After assessing the options, two different strategies were adopted: {aussiemaps} and {auspol} data is stored on a GitHub release. Each package contains functions to download data on demand. {auscensus} does not hold any data. Users are required to download Census Data Packs directly from the ABS, either manually or through a built-in function A persistent cache is set up on the user’s computer in all three cases. This was based on the same mechanism developed for the package {tigris} [25] (https://github.com/walkerke/tigris). Its code was used and adapted with the author’s permission. Each package also contains utilities to manage the amount of space used. A common approach was used in all three cases, where data was download and cache only when needed. Finally, both {auscensus} and {auspol}’s data required some prior processing. The code to achieve this has been included in their respective data-raw folders. B.2 Processing, aggregating and presenting results In all three cases, the large volumes of data meant that is not practical to libraries like readr to open and process files, due to the large amount of memory resources this operation required when dealing with large data sources (e.g. reading from files with more than 500 attributes for tens of thousands statistical areas). To deal with this, the following strategies were adopted: Use of Arrow framework [26] to read csv files, allowing to perform ‘database-like’ operations when reading, processing and aggregating data. This reduced the amount of data loaded in memory on each operation. Storing all cached data in parquet format. Parquet allows for progressive caching of census data, which then later can be retrieved together. Allowing for the packages to cache intermediate results, for faster retrieval of commonly used datasets. Use of the GeoPackage format [27] to store spatial data, which also allows for efficient out-of-memory selection and aggregation. Additionally, functions on each package provide an easy way to systematically aggregate and filter data, for example grouping votes from different political parties or providing a partial consolidation of census statistics. B.3 Coding and documentation practices For all three packages, some best practices around creating R packages were followed, including: Use functional programming principles when defining functions. Use testing tools like testthat [28] to continuously ensure package functionality. Provide adequate in-line documentation using roxygen2[29]. Write descriptive vignettes, detailing how each package work (selection of vignettes provided as appendices) Provide online documentation, using GitHub Pages to deploy a pkgdown [30] package website. "],["auspol-vignette.html", "C {auspol} Vignette C.1 What is this? C.2 Getting the data C.3 Plotting C.4 Results for one election", " C {auspol} Vignette Extracted from https://carlosyanez.github.io/auspol/articles/house_primary_vote.html on Sunday 22 January 2023 auspol includes two functions to interact with the preference distribution data: get_house_primary_vote() house_primary_vote_summary() house_primary_comparison_plot() house_primary_historic_plot() C.1 What is this? If you are unfamiliar with the Australian electoral system and preferential voting, please look at this [explainer(https://www.aec.gov.au/learn/preferential-voting.html) before proceeding. C.2 Getting the data get_house_primary_vote() is the basic function to retrieve primary vote data published by the AEC. Without any arguments, it will deliver all the results for all elections, but it comes with parameters to facilitate filtering. For instance, to get the results for Brisbane for 2022: get_house_primary_vote(division=&quot;Brisbane&quot;,year=2022) ## # A tibble: 344 × 17 ## Year StateAb DivisionID DivisionNm PollingPlaceID PollingPlace CandidateID Surname GivenNm BallotPosition Elected HistoricElected ## &lt;dbl&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;lgl&gt; &lt;lgl&gt; ## 1 2022 QLD 156 Brisbane 83397 Alderley 37204 KENNEDY Tiana 1 FALSE FALSE ## 2 2022 QLD 156 Brisbane 83397 Alderley 35972 KNUDSON Justin Marc 2 FALSE FALSE ## 3 2022 QLD 156 Brisbane 83397 Alderley 37338 BATES Stephen 3 TRUE FALSE ## 4 2022 QLD 156 Brisbane 83397 Alderley 37230 JARRETT Madonna 4 FALSE FALSE ## 5 2022 QLD 156 Brisbane 83397 Alderley 37482 EVANS Trevor 5 FALSE TRUE ## 6 2022 QLD 156 Brisbane 83397 Alderley 38213 HOLD Trevor 6 FALSE FALSE ## 7 2022 QLD 156 Brisbane 83397 Alderley 37311 BULL Anthony 7 FALSE FALSE ## 8 2022 QLD 156 Brisbane 83397 Alderley 999 Informal Informal 999 FALSE FALSE ## 9 2022 QLD 156 Brisbane 6017 Ascot 37204 KENNEDY Tiana 1 FALSE FALSE ## 10 2022 QLD 156 Brisbane 6017 Ascot 35972 KNUDSON Justin Marc 2 FALSE FALSE ## # ℹ 334 more rows ## # ℹ 5 more variables: PartyAb &lt;chr&gt;, PartyNm &lt;chr&gt;, OrdinaryVotes &lt;int&gt;, Swing &lt;dbl&gt;, SittingMemberFl &lt;lgl&gt; Both parameters can include more than one value, e.g. get_house_primary_vote(division=&quot;Brisbane&quot;,year=c(2019,2022)) ## # A tibble: 712 × 17 ## Year StateAb DivisionID DivisionNm PollingPlaceID PollingPlace CandidateID Surname GivenNm BallotPosition Elected HistoricElected ## &lt;dbl&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;lgl&gt; &lt;lgl&gt; ## 1 2022 QLD 156 Brisbane 83397 Alderley 37204 KENNEDY Tiana 1 FALSE FALSE ## 2 2022 QLD 156 Brisbane 83397 Alderley 35972 KNUDSON Justin Marc 2 FALSE FALSE ## 3 2022 QLD 156 Brisbane 83397 Alderley 37338 BATES Stephen 3 TRUE FALSE ## 4 2022 QLD 156 Brisbane 83397 Alderley 37230 JARRETT Madonna 4 FALSE FALSE ## 5 2022 QLD 156 Brisbane 83397 Alderley 37482 EVANS Trevor 5 FALSE TRUE ## 6 2022 QLD 156 Brisbane 83397 Alderley 38213 HOLD Trevor 6 FALSE FALSE ## 7 2022 QLD 156 Brisbane 83397 Alderley 37311 BULL Anthony 7 FALSE FALSE ## 8 2022 QLD 156 Brisbane 83397 Alderley 999 Informal Informal 999 FALSE FALSE ## 9 2022 QLD 156 Brisbane 6017 Ascot 37204 KENNEDY Tiana 1 FALSE FALSE ## 10 2022 QLD 156 Brisbane 6017 Ascot 35972 KNUDSON Justin Marc 2 FALSE FALSE ## # ℹ 702 more rows ## # ℹ 5 more variables: PartyAb &lt;chr&gt;, PartyNm &lt;chr&gt;, OrdinaryVotes &lt;int&gt;, Swing &lt;dbl&gt;, SittingMemberFl &lt;lgl&gt; get_house_primary_vote(division=c(&quot;Brisbane&quot;,&quot;Perth&quot;),year=c(2019,2022)) ## # A tibble: 1,783 × 17 ## Year StateAb DivisionID DivisionNm PollingPlaceID PollingPlace CandidateID Surname GivenNm BallotPosition Elected HistoricElected ## &lt;dbl&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;lgl&gt; &lt;lgl&gt; ## 1 2022 QLD 156 Brisbane 83397 Alderley 37204 KENNEDY Tiana 1 FALSE FALSE ## 2 2022 QLD 156 Brisbane 83397 Alderley 35972 KNUDSON Justin Marc 2 FALSE FALSE ## 3 2022 QLD 156 Brisbane 83397 Alderley 37338 BATES Stephen 3 TRUE FALSE ## 4 2022 QLD 156 Brisbane 83397 Alderley 37230 JARRETT Madonna 4 FALSE FALSE ## 5 2022 QLD 156 Brisbane 83397 Alderley 37482 EVANS Trevor 5 FALSE TRUE ## 6 2022 QLD 156 Brisbane 83397 Alderley 38213 HOLD Trevor 6 FALSE FALSE ## 7 2022 QLD 156 Brisbane 83397 Alderley 37311 BULL Anthony 7 FALSE FALSE ## 8 2022 QLD 156 Brisbane 83397 Alderley 999 Informal Informal 999 FALSE FALSE ## 9 2022 QLD 156 Brisbane 6017 Ascot 37204 KENNEDY Tiana 1 FALSE FALSE ## 10 2022 QLD 156 Brisbane 6017 Ascot 35972 KNUDSON Justin Marc 2 FALSE FALSE ## # ℹ 1,773 more rows ## # ℹ 5 more variables: PartyAb &lt;chr&gt;, PartyNm &lt;chr&gt;, OrdinaryVotes &lt;int&gt;, Swing &lt;dbl&gt;, SittingMemberFl &lt;lgl&gt; By default, the results are presented by polling place, with the possibility to aggregate them. get_house_primary_vote(division=c(&quot;Brisbane&quot;,&quot;Perth&quot;),year=c(2019,2022),aggregation = TRUE) ## # A tibble: 37 × 14 ## Year StateAb DivisionID DivisionNm CandidateID Surname GivenNm BallotPosition Elected HistoricElected PartyAb PartyNm SittingMemberFl ## &lt;dbl&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt; ## 1 2019 QLD 156 Brisbane 999 Informal Inform… 999 FALSE FALSE Inform… Inform… FALSE ## 2 2019 QLD 156 Brisbane 32751 PERRY Anne 1 FALSE FALSE ON Paulin… FALSE ## 3 2019 QLD 156 Brisbane 32946 NEWBURY Paul 6 FALSE FALSE ALP Austra… FALSE ## 4 2019 QLD 156 Brisbane 32960 WHITTAKER Aaron 3 FALSE FALSE UAPP United… FALSE ## 5 2019 QLD 156 Brisbane 33144 BARTLETT Andrew 4 FALSE FALSE GRN The Gr… FALSE ## 6 2019 QLD 156 Brisbane 33206 EVANS Trevor 2 TRUE TRUE LNP Libera… FALSE ## 7 2019 QLD 156 Brisbane 33224 EMANUEL Kamala 7 FALSE FALSE SAL Social… FALSE ## 8 2019 QLD 156 Brisbane 33326 JEANNERET Rod 5 FALSE FALSE FACN FRASER… FALSE ## 9 2019 WA 245 Perth 999 Informal Inform… 999 FALSE FALSE Inform… Inform… FALSE ## 10 2019 WA 245 Perth 32155 PERKS Caroli… 6 FALSE FALSE GRN The Gr… FALSE ## # ℹ 27 more rows ## # ℹ 1 more variable: OrdinaryVotes &lt;int&gt; get_house_primary_vote(division=c(&quot;Brisbane&quot;,&quot;Perth&quot;),year=c(2019,2022), polling_places = c(&quot;Yokine North&quot;)) ## # A tibble: 12 × 17 ## Year StateAb DivisionID DivisionNm PollingPlaceID PollingPlace CandidateID Surname GivenNm BallotPosition Elected HistoricElected ## &lt;dbl&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;lgl&gt; &lt;lgl&gt; ## 1 2022 WA 245 Perth 8203 Yokine North 37417 BAILEY Cameron 1 FALSE FALSE ## 2 2022 WA 245 Perth 8203 Yokine North 36515 POWELL Dean 2 FALSE FALSE ## 3 2022 WA 245 Perth 8203 Yokine North 37748 CONNOR Sean 3 FALSE FALSE ## 4 2022 WA 245 Perth 8203 Yokine North 37803 VOS Dave 4 FALSE FALSE ## 5 2022 WA 245 Perth 8203 Yokine North 37233 SZMEKURA-MOOR Sarah 5 FALSE FALSE ## 6 2022 WA 245 Perth 8203 Yokine North 37327 GORMAN Patrick 6 TRUE TRUE ## 7 2022 WA 245 Perth 8203 Yokine North 37273 NICKOLS Evan 7 FALSE FALSE ## 8 2022 WA 245 Perth 8203 Yokine North 36507 EBERHART Sonya … 8 FALSE FALSE ## 9 2022 WA 245 Perth 8203 Yokine North 36628 PERKS Caroli… 9 FALSE FALSE ## 10 2022 WA 245 Perth 8203 Yokine North 36601 DWYER David 10 FALSE FALSE ## 11 2022 WA 245 Perth 8203 Yokine North 37290 GYURU Aiden 11 FALSE FALSE ## 12 2022 WA 245 Perth 8203 Yokine North 999 Informal Inform… 999 FALSE FALSE ## # ℹ 5 more variables: PartyAb &lt;chr&gt;, PartyNm &lt;chr&gt;, OrdinaryVotes &lt;int&gt;, Swing &lt;dbl&gt;, SittingMemberFl &lt;lgl&gt; It is also possible to restrict the results to selected polling places Additionally, it is possible to select one or more states instead of a group of divisions, e.g.: get_house_primary_vote(state=c(&quot;TAS&quot;),year=c(2019,2022),aggregation = TRUE) ## # A tibble: 86 × 14 ## Year StateAb DivisionID DivisionNm CandidateID Surname GivenNm BallotPosition Elected HistoricElected PartyAb PartyNm SittingMemberFl ## &lt;dbl&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt; ## 1 2019 TAS 192 Bass 999 Informal Informal 999 FALSE FALSE Inform… Inform… FALSE ## 2 2019 TAS 192 Bass 32124 ARCHER Bridget 4 TRUE FALSE LP Liberal FALSE ## 3 2019 TAS 192 Bass 32327 HART Ross 2 FALSE TRUE ALP Austra… FALSE ## 4 2019 TAS 192 Bass 32379 WOODBURY Susan 3 FALSE FALSE AJP Animal… FALSE ## 5 2019 TAS 192 Bass 32399 COOPER Carl 7 FALSE FALSE NP The Na… FALSE ## 6 2019 TAS 192 Bass 32540 HALL Tom 1 FALSE FALSE GRN The Gr… FALSE ## 7 2019 TAS 192 Bass 32545 ROARK Allan J… 6 FALSE FALSE UAPP United… FALSE ## 8 2019 TAS 192 Bass 33590 LAMBERT Todd 5 FALSE FALSE IND Indepe… FALSE ## 9 2019 TAS 193 Braddon 999 Informal Informal 999 FALSE FALSE Inform… Inform… FALSE ## 10 2019 TAS 193 Braddon 32094 BRAKEY Craig 2 FALSE FALSE IND Indepe… FALSE ## # ℹ 76 more rows ## # ℹ 1 more variable: OrdinaryVotes &lt;int&gt; It is also possible to filter results by one or more parties: get_house_primary_vote(state=c(&quot;NT&quot;),year=c(2019,2022),aggregation = TRUE, party_abb=c(&quot;ALP&quot;,&quot;CLP&quot;)) ## # A tibble: 8 × 14 ## Year StateAb DivisionID DivisionNm CandidateID Surname GivenNm BallotPosition Elected HistoricElected PartyAb PartyNm SittingMemberFl ## &lt;dbl&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt; ## 1 2019 NT 306 Lingiari 32740 SNOWDON Warren 1 TRUE TRUE ALP Austra… FALSE ## 2 2019 NT 306 Lingiari 33045 PRICE Jacinta 6 FALSE FALSE CLP Countr… FALSE ## 3 2019 NT 307 Solomon 32743 GOSLING Luke J… 1 TRUE TRUE ALP Austra… FALSE ## 4 2019 NT 307 Solomon 33053 GANLEY Kathy 3 FALSE FALSE CLP Countr… FALSE ## 5 2022 NT 306 Lingiari 36968 RYAN Damien 1 FALSE FALSE CLP NT CLP FALSE ## 6 2022 NT 306 Lingiari 37286 SCRYMGOUR Marion 5 TRUE FALSE ALP A.L.P. FALSE ## 7 2022 NT 307 Solomon 36937 MACFARLANE Tina 4 FALSE FALSE CLP NT CLP FALSE ## 8 2022 NT 307 Solomon 37280 GOSLING Luke 3 TRUE TRUE ALP A.L.P. FALSE ## # ℹ 1 more variable: OrdinaryVotes &lt;int&gt; house_primary_vote_summary() builds on the basic function and summarises data . house_primary_vote_summary(division = &quot;Brisbane&quot;, year=2022) ## # A tibble: 8 × 11 ## Year StateAb DivisionNm PartyAb PartyNm OrdinaryVotes GivenNm Surname Percentage_with_Info…¹ Percentage Elected ## &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt; ## 1 2022 QLD Brisbane AJP Animal Justice Party 1235 Tiana KENNEDY 1.65 1.68 FALSE ## 2 2022 QLD Brisbane ALP Australian Labor Party 20346 Madonna JARRETT 27.1 27.7 FALSE ## 3 2022 QLD Brisbane GRN Queensland Greens 20985 Stephen BATES 28.0 28.6 TRUE ## 4 2022 QLD Brisbane Informal Informal 1566 Inform… Inform… 2.09 2.13 FALSE ## 5 2022 QLD Brisbane LDP Liberal Democrats 1115 Anthony BULL 1.49 1.52 FALSE ## 6 2022 QLD Brisbane LNP Liberal National Party of Quee… 26801 Trevor EVANS 35.7 36.5 FALSE ## 7 2022 QLD Brisbane ON Pauline Hanson&#39;s One Nation 1518 Trevor HOLD 2.02 2.07 FALSE ## 8 2022 QLD Brisbane UAPP United Australia Party 1430 Justin… KNUDSON 1.91 1.95 FALSE ## # ℹ abbreviated name: ¹​Percentage_with_Informal Using the previous filters, it is possible to get ad-hoc summaries, for instance - all the ALP votes in Queensland in 2022, or the historic Liberal vote in Franklin. house_primary_vote_summary(state = &quot;QLD&quot;, year=2022,parties=&quot;ALP&quot;) ## # A tibble: 30 × 11 ## Year StateAb DivisionNm PartyAb PartyNm OrdinaryVotes GivenNm Surname Percentage_with_Informal Percentage Elected ## &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt; ## 1 2022 QLD Blair ALP Australian Labor Party 27323 Shayne NEUMANN 33.4 35.5 TRUE ## 2 2022 QLD Bonner ALP Australian Labor Party 20930 Tabatha YOUNG 29.3 30.0 FALSE ## 3 2022 QLD Bowman ALP Australian Labor Party 23196 Donisha DUFF 28.7 29.6 FALSE ## 4 2022 QLD Brisbane ALP Australian Labor Party 20346 Madonna JARRETT 27.1 27.7 FALSE ## 5 2022 QLD Capricornia ALP Australian Labor Party 20543 Russell ROBERTSON 26.9 28.7 FALSE ## 6 2022 QLD Dawson ALP Australian Labor Party 18921 Shane HAMILTON 23.8 24.9 FALSE ## 7 2022 QLD Dickson ALP Australian Labor Party 22988 Ali FRANCE 31.0 32.3 FALSE ## 8 2022 QLD Fadden ALP Australian Labor Party 18140 Letitia DEL FABBRO 21.7 22.8 FALSE ## 9 2022 QLD Fairfax ALP Australian Labor Party 18001 Sue FERGUSON 21.0 22.3 FALSE ## 10 2022 QLD Fisher ALP Australian Labor Party 19804 Judene ANDREWS 22.9 23.7 FALSE ## # ℹ 20 more rows house_primary_vote_summary(division=&quot;Franklin&quot;,parties=&quot;LP&quot;) ## # A tibble: 7 × 11 ## Year StateAb DivisionNm PartyAb PartyNm OrdinaryVotes GivenNm Surname Percentage_with_Informal Percentage Elected ## &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt; ## 1 2004 TAS Franklin LP Liberal 21337 Henry FINNIS 37.6 39.0 FALSE ## 2 2007 TAS Franklin LP Liberal 22616 Vanessa GOODWIN 39.8 41.0 FALSE ## 3 2010 TAS Franklin LP Liberal 18386 Jane HOWLETT 32.0 33.3 FALSE ## 4 2013 TAS Franklin LP Liberal 21867 Bernadette BLACK 37.1 38.7 FALSE ## 5 2016 TAS Franklin LP Liberal 20754 Amanda-Sue MARKHAM 33.9 35.1 FALSE ## 6 2019 TAS Franklin LP Liberal 18591 Dean YOUNG 29.9 30.9 FALSE ## 7 2022 TAS Franklin LP Liberal 14374 Kristy Maree JOHNSON 24.5 25.9 FALSE C.3 Plotting C.3.1 Historic Trends The first plotting convenience function in this package allows comparing the evolution of primary voting across time. This function relies on house_primary_summary and uses many of its options. Its first use is to represent party trends in one electorate: As they can be many minor parties, it is sometimes useful just to focus on a number of parties. This function allows filtering by a number of parties or by filtering by the most voted in a certain year. In both cases, it is possible to consolidate others’ votes. Finally, it is possible to aggregate party acronyms - sometimes the same party has changed named or registered differently C.4 Results for one election This package also contains a convenience function to look at the primary vote results for one division. Lile the previous function, this also inherits many of the attributes of get_house_primary_vote. The plots can also be displayed using bars, as shown below "],["auscensus-vignette.html", "D {auscensus} Vignette", " D {auscensus} Vignette Extracted from https://carlosyanez.github.io/auscensus/articles/complex_case.html on Sunday 22 January 2023 This vignette shows a more complex use case of auscensus. Let’s assume we want to extract the percentage of Australian Citizens for all Commonwealth Electoral Divisions, as measured in last 4 Censuses (2006-2021). An initial exploration shows that this data can be found in table 01 (across all four censuses) - which provided an statistical summary. However, is not published aggregated by electorate across all censuses. census_tables &lt;- list_census_tables() census_tables &lt;- census_tables |&gt; filter(if_any(any_of(c(&quot;Number&quot;)),~ .x %in% c(&quot;01&quot;))) tables_summary &lt;- census_tables |&gt; select(-contains(&quot;Table&quot;)) |&gt; pivot_longer(-Number, names_to=&quot;Year&quot;,values_to = &quot;Value&quot;) |&gt; filter(!is.na(Value)) |&gt; select(-Value) list_census_geo_tables(year = tables_summary$Year,geo=&quot;CED|CED_2007|CED_2004&quot;,table_number = tables_summary$Number) |&gt; mutate(Year=as.character(Year)) |&gt; right_join(tables_summary, by=c(&quot;table_number&quot;=&quot;Number&quot;,&quot;Year&quot;=&quot;Year&quot;)) ## # A tibble: 4 × 3 ## Year table_number CED ## &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt; ## 1 2011 01 TRUE ## 2 2016 01 TRUE ## 3 2021 01 TRUE ## 4 2006 01 NA Therefore, we will retrieve the data from the lowest statistical unit. However, SA1 were not available in 2006 - where the smallest area was a “CD”. list_census_geo_tables(year = tables_summary$Year,geo=c(&quot;SA1|CD&quot;),table_number = tables_summary$Number) |&gt; mutate(Year=as.character(Year)) |&gt; right_join(tables_summary, by=c(&quot;table_number&quot;=&quot;Number&quot;,&quot;Year&quot;=&quot;Year&quot;)) ## # A tibble: 4 × 4 ## Year table_number CD SA1 ## &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt; &lt;lgl&gt; ## 1 2006 01 TRUE NA ## 2 2011 01 NA TRUE ## 3 2016 01 NA TRUE ## 4 2021 01 NA TRUE The next step is to figure the attributes for the numbers of Australian citizen and total population, which are presented below: citizenship_attributes &lt;- tibble() for(i in 1:nrow(tables_summary)){ table_i &lt;- tables_summary[i,]$Number year_i &lt;- tables_summary[i,]$Year attr_i &lt;- list_census_attributes(table_i) |&gt; pivot_longer(-c(Table,Attribute), names_to=&quot;Year&quot;,values_to = &quot;Value&quot;) |&gt; filter(Year==year_i) |&gt; filter(!is.na(Value)) |&gt; select(-Value) citizenship_attributes &lt;- bind_rows(attr_i,citizenship_attributes) } citizenship_attributes |&gt; head() ## # A tibble: 6 × 3 ## Table Attribute Year ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 01 Total Persons_males 2006 ## 2 01 Total Persons_females 2006 ## 3 01 Total Persons_persons 2006 ## 4 01 Age Groups: 0-4 Years_males 2006 ## 5 01 Age Groups: 0-4 Years_females 2006 ## 6 01 Age Groups: 0-4 Years_persons 2006 citizenship_attributes &lt;- citizenship_attributes |&gt; distinct(Attribute,Year) |&gt; filter(str_detect(Attribute,&quot;[Aa]ustralian&quot;)) |&gt; filter(str_detect(Attribute,&quot;[Pp]erson&quot;)) |&gt; mutate(dummy=TRUE) |&gt; pivot_wider(names_from = Year, values_from = dummy) |&gt; bind_rows( citizenship_attributes |&gt; distinct(Attribute,Year) |&gt; filter(str_detect(Attribute,&quot;^[Tt]otal&quot;)) |&gt; filter(str_detect(Attribute,&quot;[Pp]ersons$&quot;)) |&gt; mutate(dummy=TRUE) |&gt; pivot_wider(names_from = Year, values_from = dummy) ) citizenship_attributes ## # A tibble: 4 × 5 ## Attribute `2006` `2011` `2016` `2021` ## &lt;chr&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;lgl&gt; ## 1 Australian Citizen_persons TRUE NA NA NA ## 2 Australian_citizen_persons NA TRUE TRUE TRUE ## 3 Total Persons_persons TRUE NA NA NA ## 4 Total_persons_persons NA TRUE TRUE TRUE Using attribute_tibble_to_list, this data frame can be converted into the required format. citizenship_attributes &lt;- citizenship_attributes |&gt; select(Attribute) |&gt; mutate(AttrNew = case_when( str_detect(Attribute,&quot;Australian&quot;) ~ &quot;Australian Citizens&quot;, str_detect(Attribute,&quot;Total&quot;) ~ &quot;Total&quot; )) levels &lt;- attribute_tibble_to_list(citizenship_attributes) Now, we can cycle through the four censuses and extract the data. Please note that CDs and SA1s are not equivalent, but they are stored together for convenience: census_years &lt;- c(&quot;2006&quot;,&quot;2011&quot;,&quot;2016&quot;,&quot;2021&quot;) citizenship &lt;- tibble() for(year in census_years){ if(year==&quot;2006&quot;){ geo_structure_x &lt;- &quot;CD&quot; } else{ geo_structure_x &lt;- &quot;SA1&quot; } citizenship_i &lt;- get_census_summary(census_table = census_tables, selected_years = year, geo_structure=geo_structure_x, attribute = levels) citizenship &lt;- bind_rows(citizenship,citizenship_i) } rm(citizenship_i,geo_structure_x,levels,citizenship_attributes) To aggregate the data, aussiemaps::geo_aggregate() can help using area to apportion on non-overalpping cases. Then, this package’s calculate_percentage() will take the totals from the list and calculate percentages. citizenship_ced&lt;- tibble() codes &lt;- c(&quot;CD_CODE_2006&quot;,&quot;SA1_7DIGITCODE_2011&quot;,&quot;SA1_7DIGITCODE_2016&quot;,&quot;SA1_CODE_2021&quot;) ceds &lt;- c(&quot;CED_NAME_2006&quot;,&quot;CED_NAME_2011&quot;,&quot;CED_NAME_2016&quot;,&quot;CED_NAME_2021&quot;) for(i in 1:length(census_years)){ year &lt;- as.double(census_years[i]) value_i &lt;- citizenship |&gt; filter(Year==year) |&gt; select(-Unit) |&gt; rename(!!codes[i]:=&quot;Census_Code&quot;) |&gt; collect() |&gt; aussiemaps::geo_aggregate( values_col=&quot;Value&quot;, original_geo=codes[i], new_geo=ceds[i], grouping_col = c(&quot;Year&quot;,&quot;Attribute&quot;), year=census_years[i]) |&gt; rename(&quot;Unit&quot;=ceds[i]) |&gt; filter(!is.na(Unit)) |&gt; filter(str_detect(Unit,&quot;[Ss]hipping&quot;,TRUE))|&gt; filter(str_detect(Unit,&quot;[Uu]sual&quot;,TRUE)) |&gt; filter(str_detect(Unit,&quot;[Aa]pplicable&quot;,TRUE)) value_i &lt;- value_i |&gt; auscensus::calculate_percentage(key_col = &quot;Attribute&quot;, value_col = &quot;Value&quot;, key_value = &quot;Total&quot;, percentage_scale = 100) citizenship_ced &lt;- bind_rows(citizenship_ced,value_i) } citizenship_ced ## # A tibble: 601 × 6 ## Unit Year Attribute Value Total Percentage ## &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Adelaide 2006 Australian Citizens 231816 280302 82.7 ## 2 Aston 2006 Australian Citizens 230020 258926 88.8 ## 3 Ballarat 2006 Australian Citizens 236494 258442 91.5 ## 4 Banks 2006 Australian Citizens 208362 236742 88.0 ## 5 Barker 2006 Australian Citizens 266066 290820 91.5 ## 6 Barton 2006 Australian Citizens 210574 262468 80.2 ## 7 Bass 2006 Australian Citizens 171262 188540 90.8 ## 8 Batman 2006 Australian Citizens 211122 256214 82.4 ## 9 Bendigo 2006 Australian Citizens 243860 263770 92.5 ## 10 Bennelong 2006 Australian Citizens 208946 258680 80.8 ## # ℹ 591 more rows "],["aussiemaps-vignette.html", "E {aussiemaps} Vignette E.1 {aussiemaps} - Yet another maps package E.2 Getting started. E.3 Filtering via regular expressions E.4 Even more complex filtering E.5 Aggregation E.6 Data Aggregation", " E {aussiemaps} Vignette Extracted from https://carlosyanez.github.io/aussiemaps/articles/aussiemaps.html on Sunday 22 January 2023 E.1 {aussiemaps} - Yet another maps package This package has been built to facilitate the use of the geographic boundary files published by the Australian Bureau of Statistics (ABS). The ABS has published several boundary files - i.e. the Australian Statistical Geography Standard (ASGS) from 2006 onwards and the Australian Standard Geographical Classification (ASGC) before that - covering both: Statistical Geographic Structures created and maintained by the ABS - and used to collect data. Non-ABS structure, e.g Postal Areas, Electoral Divisions, LGA boundaries. This package has four versions of the above, aligned with Census years 2006, 2011,2016 and 2021. This makes it easy to mix use with Census data packs or the {auscensus} package. This package provides access to a processed version of those boundaries - as sf objects, allowing it to cater for the following scenarios: Get the boundaries of an electoral division across time. Get all the S1 or S1 areas within a Council area. Get all postcodes in a state or territory. This repository also contains the R script used to process the files. Although not tested, the functions could also accommodate BYO structures for other years. E.2 Getting started. The core function of this package is get_map(), which retrieves the sf files. get_map provides several filters to narrow down the data retrieved and avoid getting everything unless is needed. The key parameters for this function are: How the data will be filtered (e.g. return only objects in a particular state, council or metro area) Which year/version of the data will be retrieved? Which aggregation will be used (e.g. which will be the resulting objects) Filters and column names follow the same name convention used in the original ABS files. The function list_attributes(), will present them in tibble format: list_attributes() |&gt; head(10) ## # A tibble: 10 × 5 ## attributes `2006` `2011` `2016` `2021` ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 CD_CODE CD_CODE_2006 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; ## 2 CED_CODE CED_CODE_2006 CED_CODE_2011 CED_CODE_2016 CED_CODE_2021 ## 3 CED_NAME CED_NAME_2006 CED_NAME_2011 CED_NAME_2016 CED_NAME_2021 ## 4 IARE_CODE IARE_CODE_2006 IARE_CODE_2011 IARE_CODE_2016 IARE_CODE_2021 ## 5 IARE_NAME IARE_NAME_2006 IARE_NAME_2011 IARE_NAME_2016 IARE_NAME_2021 ## 6 ILOC_CODE ILOC_CODE_2006 ILOC_CODE_2011 ILOC_CODE_2016 ILOC_CODE_2021 ## 7 ILOC_NAME ILOC_NAME_2006 ILOC_NAME_2011 ILOC_NAME_2016 ILOC_NAME_2021 ## 8 IREG_CODE IREG_CODE_2006 IREG_CODE_2011 IREG_CODE_2016 IREG_CODE_2021 ## 9 IREG_NAME IREG_NAME_2006 IREG_NAME_2011 IREG_NAME_2016 IREG_NAME_2021 ## 10 LGA_CODE LGA_CODE_2006 LGA_CODE_2011 LGA_CODE_2016 LGA_CODE_2021 Let’s say we want to retrieve all SA1 in the City of Melbourne for 2016 - this can be done via: melbourne_sa1 &lt;- get_map(filters=list(LGA_NAME_2016=c(&quot;Melbourne&quot;)), year=2016, aggregation = c(&quot;SA1_MAINCODE_2016&quot;)) #just an empty plot melbourne_sa1 |&gt; ggplot()+ geom_sf(fill=&quot;azure1&quot;) + theme_void() + labs(title=&quot;SA1s in the City of Melbourne&quot;) E.3 Filtering via regular expressions The filter arguments are intended to be regular expressions, for instance: preston &lt;- get_map(filters=list(SSC_NAME_2016=c(&quot;Preston&quot;)), year=2016, aggregation = c(&quot;SSC_NAME_2016&quot;)) preston |&gt; select(SSC_NAME_2016,UCL_NAME_2016,STE_NAME_2016) ## Simple feature collection with 8 features and 3 fields ## Geometry type: POLYGON ## Dimension: XY ## Bounding box: xmin: 115.6286 ymin: -41.3658 xmax: 152.0004 ymax: -20.34465 ## Geodetic CRS: GDA94 ## SSC_NAME_2016 UCL_NAME_2016 STE_NAME_2016 geom ## 1 Prestons Sydney New South Wales POLYGON ((150.8737 -33.9276... ## 2 Preston (Toowoomba - Qld) Remainder of State/Territory (Qld) Queensland POLYGON ((151.9873 -27.6787... ## 3 Preston (Whitsunday - Qld) Remainder of State/Territory (Qld) Queensland POLYGON ((148.6227 -20.3747... ## 4 Preston (Tas.) Remainder of State/Territory (Tas.) Tasmania POLYGON ((146.0962 -41.2507... ## 5 South Preston Remainder of State/Territory (Tas.) Tasmania POLYGON ((146.0302 -41.3338... ## 6 Preston Beach Remainder of State/Territory (WA) Western Australia POLYGON ((115.6492 -32.8839... ## 7 Preston Settlement Remainder of State/Territory (WA) Western Australia POLYGON ((116.117 -33.40392... ## 8 Preston (Vic.) Melbourne Victoria POLYGON ((144.9798 -37.7427... Whereas prestons &lt;- get_map(filters=list(SSC_NAME_2016=c(&quot;^Pres&quot;), STE_NAME_2016=c(&quot;Wales&quot;,&quot;^T&quot;) ), year=2016, aggregation = c(&quot;SSC_NAME_2016&quot;)) prestons |&gt; select(SSC_NAME_2016,UCL_NAME_2016,STE_NAME_2016) ## Simple feature collection with 3 features and 3 fields ## Geometry type: POLYGON ## Dimension: XY ## Bounding box: xmin: 146.0066 ymin: -41.33851 xmax: 150.8979 ymax: -33.9263 ## Geodetic CRS: GDA94 ## SSC_NAME_2016 UCL_NAME_2016 STE_NAME_2016 geom ## 1 Prestons Sydney New South Wales POLYGON ((150.8737 -33.9276... ## 2 Preservation Bay Remainder of State/Territory (Tas.) Tasmania POLYGON ((146.0401 -41.0973... ## 3 Preston (Tas.) Remainder of State/Territory (Tas.) Tasmania POLYGON ((146.0962 -41.2507... E.4 Even more complex filtering If more complex subsetting is needed, it is possible to pass a table with the elements to be selected. In order to do that, list_structure() comes to help. This function uses the same year and filters parameters than get_map() (actually this function calls the former if no table is provided). Once you have the dataset, you can use any ad-hoc filter to get the needed structures. For example greater_sydney &lt;- list_structure(year=2021,filters=list(GCCSA_NAME_2021=&quot;Greater Sydney&quot;)) #use_cache option stores the results/reuses pre-processed results sydney_area &lt;- get_map(filter_table = greater_sydney, year=2021, aggregation = &quot;GCCSA_NAME_2021&quot;, use_cache = TRUE) ## Reading layer `cache_2021_6766fccc&#39; from data source `C:\\Users\\carlo\\OneDrive\\Documents\\.aussiemaps_cache\\cache_2021_6766fccc.gpkg&#39; using driver `GPKG&#39; ## Simple feature collection with 1 feature and 36 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: 149.9719 ymin: -34.33116 xmax: 151.6306 ymax: -32.99606 ## Geodetic CRS: GDA2020 #outline # all suburbs starting wit A suburbs_a_filter &lt;- greater_sydney |&gt; filter(str_detect(SAL_NAME_2021,&quot;^A&quot;)) suburbs_a &lt;- get_map(filter_table = suburbs_a_filter, year=2021, aggregation = &quot;SAL_NAME_2021&quot;) |&gt; mutate(border=&quot;orange&quot;,fill=&quot;orange&quot;) ggplot() + geom_sf(data=sydney_area,fill=&quot;white&quot;,colour=&quot;black&quot;)+ geom_sf(data=suburbs_a,fill=&quot;orange&quot;) + labs(title=&quot;Suburbs starting with A - Sydney&quot;) + theme_void() E.5 Aggregation It is worth noticing that the aggregation parameter accepts more than one variable. Those parameters are passed to dplyr::group_by() before aggregation - thus more variables will impact how sf objects are aggregated. For instance, if we look at the postal areas (ABS approximation of a postcode) in the cities of Melbourne and Port Phillip: poas_inner_melbourne &lt;- get_map(filters=list(LGA_NAME_2021=c(&quot;Melbourne&quot;,&quot;Phillip$&quot;)), year=2021, aggregation = c(&quot;POA_NAME_2021&quot;,&quot;LGA_NAME_2021&quot;)) poas_inner_melbourne |&gt; mutate(colour=case_when( POA_NAME_2021==&quot;3004&quot; ~ &quot;orange&quot;, TRUE ~ &quot;grey&quot; )) |&gt; ggplot()+ geom_sf(aes(fill=colour,colour=LGA_NAME_2021)) + scale_fill_identity() + theme_void() + labs(title=&quot;Postcode 3004 extends across two LGAs&quot;) ## Using external data This package provides sf data, thus the result can be easily merged with any other data frame. Since data has been taken from the ABS and the output contains both names and codes of geographic structures, data can be joined using an un-ambiguous key. Furthermore, with {auscensus}, this package can be used as data filters to retrieve said data in the first place. For example: # Chileans by Commonwealth Electoral Divisions in Metropolitan Brisbane, 2021 attr &lt;- list_structure(year=2021,filters=list(GCCSA_NAME_2021=c(&quot;Brisbane&quot;))) |&gt; distinct(CED_NAME_2021) chileans &lt;- auscensus::get_census_summary(table_number= &quot;09&quot;, selected_years = &quot;2021&quot;, geo_structure = &quot;CED&quot;, geo_unit_names = attr$CED_NAME_2021, attribute = list(Chileans=c(&quot;Persons_chile_total&quot;)), reference_total = list(Total=c(&quot;Persons_total_total&quot;)), percentage_scale =100) brisbane_ced &lt;- get_map(filters = list(GCCSA_NAME_2021=c(&quot;Brisbane&quot;)), year = 2021, aggregation = c(&quot;CED_NAME_2021&quot;), use_cache = TRUE) ## Reading layer `cache_2021_4ec18365&#39; from data source `C:\\Users\\carlo\\OneDrive\\Documents\\.aussiemaps_cache\\cache_2021_4ec18365.gpkg&#39; using driver `GPKG&#39; ## Simple feature collection with 15 features and 36 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: 152.0734 ymin: -28.36387 xmax: 153.5467 ymax: -26.45233 ## Geodetic CRS: GDA2020 chileans$Value ## [1] 85 109 64 228 44 90 241 87 66 180 267 107 96 223 66 brisbane_ced |&gt; left_join(chileans,by=c(&quot;CED_NAME_2021&quot;=&quot;Unit&quot;)) |&gt; ggplot(aes(fill=Value,colour=Value)) + geom_sf() + scale_fill_continuous()+ labs(title=&quot;Chileans in Bribane&#39;s Federal Electorates&quot;) + theme_void() E.6 Data Aggregation As a bonus function, geo_aggregate() aggregates data, transforming between geographic structures. For instance, let’s imagine that for the previous case, it is only possible to get data by SA2. geo_aggregate() can aggregate the data to obtain an approximation for each electorate. When an SA1 is not fully contained by an electorate, the function will use the overlapping area as the weighting factor. attr &lt;- list_structure(year=2021,filters=list(GCCSA_NAME_2021=c(&quot;Brisbane&quot;))) |&gt; distinct(SA2_CODE_2021) chileans_sa2 &lt;- auscensus::get_census_summary(table_number= &quot;09&quot;, selected_years = &quot;2021&quot;, geo_structure = &quot;SA2&quot;, geo_unit_codes = attr$SA2_CODE_2021, attribute = list(Chileans=c(&quot;Persons_chile_total&quot;))) |&gt; rename(&quot;SA2_CODE_2021&quot;=&quot;Census_Code&quot;) # please note these Electoral divisions are not built from SA2s - proportional allocation will result in factional # Therefore - This is an approximation chileans &lt;- geo_aggregate(original_data = chileans_sa2, values_col = &quot;Value&quot;, original_geo = &quot;SA2_CODE_2021&quot;, new_geo = &quot;CED_NAME_2021&quot;, grouping_col = c(&quot;Year&quot;,&quot;Attribute&quot;), year=2021) |&gt; rename(&quot;Unit&quot;=&quot;CED_NAME_2021&quot;) brisbane_ced |&gt; left_join(chileans,by=c(&quot;CED_NAME_2021&quot;=&quot;Unit&quot;)) |&gt; ggplot(aes(fill=Value,colour=Value)) + geom_sf() + scale_fill_continuous()+ labs(title=&quot;Chileans in Bribane&#39;s Federal Electorates&quot;) + theme_void() "],["references.html", "References", " References "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
