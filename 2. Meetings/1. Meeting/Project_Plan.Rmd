---
title           : "Data Summary"
programme       : "Data Analytics MSc (ODL)"
subject         : "Project"
author          : "Carlos Yanez Santibanez"
date            : "15 October 2022"

documentclass   : article   # article (default) report
fontsize        : 11pt      # 10pt 11pt (default) 12pt
lang            : en-GB

output:
  bookdown::pdf_book:
    base_format: uofgdataanalyticsreport::uofgdataanalyticsreport
    pandoc_args: --listings
    fig_caption: yes
    number_sections: yes
    toc: no
    md_extensions: +yaml_metadata_block

---


```{r setup, include = FALSE}
library(tidyverse)
library(uofgdataanalyticsreport)
library(lubridate)
library(ganttrify)
library(flextable)
library(showtext)
library(sysfonts)

sysfonts::font_add_google("Roboto","Roboto")
showtext::showtext_auto()

```

```{r title_page, echo=FALSE,include=TRUE}
cd_header_footer()  #adds header and footer
cd_page_title()     #title page

#to customise, run ?function to see the relevant parameters
```


```{r}
project_start_date <- parse_date("2022-10-10")
```



```{r tasks}

tasks <- tribble(~wp,              ~activity,                               ~start_date, ~end_date,
                 "1. Kick-off",        "1.1 Create Literature List",            1,           2,
                 "1. Kick-off",        "1.2 Get Data",                          1,           1,
                 "1. Kick-off",        "1.3 Summarise Data",                    2,           2,
                 "1. Kick-off",        "1.4 Create Project Plan",               2,           2,
                 "2. Data and Theory", "2.1 Review Literature",                 3,           5,
                 "2. Data and Theory", "2.2 Formulate Working Hypothesis",      6,           7,
                 "2. Data and Theory", "2.3 Create Census Package",             3,           5,
                 "2. Data and Theory", "2.4 Create Working Datasets",           5,           6,
                 "2. Data and Theory", "2.5 Working Datasets EDA",              5,           7,
                 "3. Modelling",       "3.1 Select Initial Models",             8,           8,
                 "3. Modelling",       "3.2 Identify Key Variables",            9,           9,
                 "3. Modelling",       "3.3 Tune Models",                      10,          11,
                 "3. Modelling",       "3.4 Analyse Results",                  12,          14,
                 "3. Modelling",       "3.5 Correct and Iterate",              14,          16,
                 "3. Modelling",       "3.5 Correct and Iterate",              14,          16,
                 "3. Modelling",       "3.5 Correct and Iterate",              14,          16,
                 "4. Conclude",        "4.1 Model Corrections",                17,          20,
                 "4. Conclude",        "4.2 Conclusions",                      17,          21,
                 "5. Revisions",       "5.1 Finish Document",                  22,          28,
                 "5. Revisions",       "5.2 Create Presentation",              22,          28,
                 "6. Summit and Present","6.1 Submit and Present",             29,          31,
                 ) %>%
          mutate(start_date = project_start_date + dweeks(start_date-1),
                 end_date   = project_start_date + 4 + dweeks(end_date-1))

```




```{r milestones}

milestones <- tasks %>%
              group_by(wp) %>%
              summarise(spot_date=max(end_date),.groups = "drop") %>%
              arrange(spot_date) %>%
              mutate(spot_type=str_c("M",row_number())) %>%
              rename("activity"="wp") %>%
  filter(!str_detect(activity,"6. Summit and Present")) %>%
  bind_rows(tribble(~activity, ~spot_date, ~spot_type,
                    "6. Summit and Present",parse_date("2023-04-24"),"D",
                    "6. Summit and Present",parse_date("2023-05-12"),"F",
                    ))

```

# Project Plan

## Gantt Chart

```{r}

gantt <- ganttrify(project = tasks,
          spots = milestones,
          by_date = TRUE,
          exact_date = TRUE,
          font_family = "Roboto")

gantt
```

## Tasks

```{r}
tasks %>%
  rename("Group"="wp","Activity"="activity","Start"="start_date","End"="end_date") %>%
  mutate(across(where(is.Date),~ str_c(day(.x)," ",month(.x,label=TRUE)))) %>%
  flextable() %>%
  merge_v(j = "Group",target = c("Group")) %>%
  autofit()
```


## Milestones

```{r}
milestones %>%
  select(Milestone=spot_type,Date=spot_date) %>%
  mutate(across(where(is.Date),~ str_c(day(.x)," ",month(.x,label=TRUE)))) %>%
  flextable() %>%
  autofit()
  
```

# Nottes
