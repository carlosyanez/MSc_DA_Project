---
title           : "Data Summary"
programme       : "Data Analytics MSc (ODL)"
subject         : "Project"
author          : "Carlos Yanez Santibanez"
date            : "15 October 2022"

documentclass   : article   # article (default) report
fontsize        : 11pt      # 10pt 11pt (default) 12pt
lang            : en-GB

output:
  bookdown::pdf_book:
    base_format: uofgdataanalyticsreport::uofgdataanalyticsreport
    pandoc_args: --listings
    fig_caption: yes
    number_sections: yes
    toc: no
    md_extensions: +yaml_metadata_block
header-includes: 
- \usepackage{pdflscape}
- \newcommand{\blandscape}{\begin{landscape}}
- \newcommand{\elandscape}{\end{landscape}}

---

```{r setup, include = FALSE}
library(tidyverse)
library(uofgdataanalyticsreport)
library(lubridate)
library(ganttrify)
library(showtext)
library(sysfonts)
library(knitr)
library(kableExtra)


sysfonts::font_add_google("Roboto","Roboto")
showtext::showtext_auto()


knitr::opts_chunk$set(
 # fig.width=9, fig.height=3.5, fig.retina=3,
  out.width = "100%",
  cache = FALSE,
  echo = FALSE,
  eval = TRUE,
  include=TRUE,
  message = FALSE, 
  warning = FALSE,
  fig.show = TRUE,
  hiline = TRUE
)

knitr::knit_hooks$set(inline = function(x) { if(!is.numeric(x)){ x }else{ digits_formatter(x,sig_digits = 3) } })


```

```{r title_page, echo=FALSE,include=TRUE}
cd_header_footer()  #adds header and footer
cd_page_title()     #title page

#to customise, run ?function to see the relevant parameters
```

# Project Plan

The project outline has been organised in "sprints" to approximately match the meeting schedule, with the aim to make the most of the supervisor's input. Each sprint will aim to :

* **Phase 1 - Kick-off** (*this meeting*): Present and discuss project plan, approach, existing data and literature review plan.
* **Phase 2 - Data and Theory**: Conduct detailed data review, creating code/packages to retrieve tidy data where needed (.e.g. Census). Conduct detailed literature review, formulate initial hypotheses (which data are important, possible modelling approach).
* **Phase 3 - Modelling** : Conduct core analytical work. Validate/ tune initial hypotheses: compare models and variables of significance. Analyse results against literature. Iterate over initial assumptions.
* **Phase 4 - Conclude** :  Implement any model corrections and complete draft for revision.
* **Phase 5 - Revision** :  Finish documentation and code, prepare presentation.
* **Phase 6 - Submit and Present**: Submit work, present.

This plan has been made under the below assumptions:

* This plan is targeted to meet the April 2023 submission deadline. To achieve this objective, sufficient analytical progress needs to be made by the of the year (halfway phase 3). If that's not the case the plan needs to be adjusted to reflect a June submission.
* Taken the above into consideration, phases 4,5 and 6 have a general plan at this stage, which needs to be updated by EOY.
* This plan assumes that all documentation/deliverables will be continuously generated - thus there is no explicitly separate allocation of time to this.

\blandscape
## Gantt Chart
```{r project plan}
project_start_date <- parse_date("2022-10-10")

tasks <- tribble(~wp,              ~activity,                               ~start_date, ~end_date,
                 "1. Kick-off",        "1.1 Create Literature List",            1,           2,
                 "1. Kick-off",        "1.2 Get Data",                          1,           1,
                 "1. Kick-off",        "1.3 Summarise Data",                    2,           2,
                 "1. Kick-off",        "1.4 Create Project Plan",               2,           2,
                 "2. Data and Theory", "2.1 Review Literature",                 3,           5,
                 "2. Data and Theory", "2.2 Formulate Working Hypothesis",      6,           7,
                 "2. Data and Theory", "2.3 Create Census Package",             3,           5,
                 "2. Data and Theory", "2.4 Create Working Datasets",           5,           6,
                 "2. Data and Theory", "2.5 Working Datasets EDA",              5,           7,
                 "3. Modelling",       "3.1 Select Initial Models",             8,           8,
                 "3. Modelling",       "3.2 Identify Key Variables",            9,           9,
                 "3. Modelling",       "3.3 Tune Models",                      10,          11,
                 "3. Modelling",       "3.4 Analyse Results",                  12,          14,
                 "3. Modelling",       "3.5 Correct and Iterate",              14,          16,
                 "3. Modelling",       "3.5 Correct and Iterate",              14,          16,
                 "3. Modelling",       "3.5 Correct and Iterate",              14,          16,
                 "4. Conclude",        "4.1 Model Corrections",                17,          20,
                 "4. Conclude",        "4.2 Conclusions",                      17,          21,
                 "5. Revisions",       "5.1 Finish Document",                  22,          28,
                 "5. Revisions",       "5.2 Create Presentation",              22,          28,
                 "6. Submit and Present","6.1 Submit and Present",             29,          31,
                 ) %>%
          mutate(start_date = project_start_date + dweeks(start_date-1),
                 end_date   = project_start_date + 4 + dweeks(end_date-1))

milestones <- tasks %>%
              group_by(wp) %>%
              summarise(spot_date=max(end_date),.groups = "drop") %>%
              arrange(spot_date) %>%
              mutate(spot_type=str_c("M",row_number())) %>%
              rename("activity"="wp")  %>%
  filter(!str_detect(activity,"6. Submit and Present"))  %>%
  bind_rows(tribble(~activity, ~spot_date, ~spot_type,
                    "6. Submit and Present",parse_date("2023-04-24"),"D",
                    "6. Submit and Present",parse_date("2023-05-12"),"F",
                    ))

```

```{r gantt}

gantt <- ganttrify(project = tasks,
          spots = milestones,
          by_date = TRUE,
          exact_date = TRUE,
          colour_palette = ochRe::ochre_palettes[["parliament"]],
          line_end   ="butt",
          alpha_wp = 1,
          alpha_activity = 0.8,
          font_family = "Roboto")

gantt  + geom_vline(xintercept = today(),
                    colour="red", linetype="dotted",
                    size=1.2)
```

\elandscape
## Tasks

```{r tasks}
tasks %>%
  rename("Group"="wp","Activity"="activity","Start"="start_date","End"="end_date") %>%
  mutate(across(where(is.Date),~ str_c(day(.x)," ",month(.x,label=TRUE)))) %>%
  kable(caption="Milestones",booktabs = T) %>%
  kable_styling(latex_options = c("HOLD_position","scale_down","striped"),
                font_size = 10,
                full_width = FALSE,
                position = "center") %>%
  row_spec(0,bold=TRUE)


```

